!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=52)}({0:function(e,t){e.exports=React},1:function(e,t){e.exports=AppCommon},105:function(e,t,n){"use strict";n.r(t);var p=n(1),m=n(0),y=n.n(m);function b(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(){var e=d(Object(m.useState)(!1),2),t=e[0],n=e[1],i=(e=d(Object(m.useState)({}),2))[0],r=e[1],c=(e=d(Object(m.useState)({}),2))[0],o=e[1],a=(e=d(Object(m.useState)([]),2))[0],l=e[1];function u(e){var t;r(e),e.form&&e.form.length&&(t={},e.form.forEach(function(e){t[e.name]=e.value}),o(t)),n(!0)}function s(){n(!1)}function f(t){return function(e){o(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},c,h({},t,e.target.value)))}}return Object(m.useEffect)(function(){return p.Alert.onDialog(u),function(){p.Alert.offDialog(u)}}),y.a.createElement(p.Dialog,{className:"alert-dialog",open:t,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},y.a.createElement(p.DialogTitle,{id:"alert-dialog-title"},i.title),y.a.createElement(p.DialogContent,{className:"content"},y.a.createElement(p.DialogContentText,{key:"dialog-desc",id:"alert-dialog-description"},i.desc),!a||a.length<1?null:y.a.createElement("div",{className:"error-msg"},y.a.createElement("ul",null,a.map(function(e,t){return y.a.createElement("li",null,t+1,". ",e)}))),i.form&&i.form.length?i.form.map(function(e){return"TextField"===e.type?y.a.createElement(p.TextField,{key:e.name,autoFocus:!0,margin:"dense",required:!0,label:e.label,value:c[e.name],type:e.controlType,onChange:f(e.name),fullWidth:!0}):null}):null),y.a.createElement(p.DialogActions,null,y.a.createElement(p.Button,{onClick:s,color:"primary"},i.cancelLabel),y.a.createElement(p.Button,{onClick:function(){if(l([]),i.form){var e=[],t=!0,n=!1,r=void 0;try{for(var o=i.form[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var a=a.value;a&&a.validate&&((a=a.validate(c))&&e.push(a))}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}if(0<e.length)return void l(e)}i.callback(c),s()},color:"primary",autoFocus:!0},i.okLabel)))}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g={success:"success",info:"info",error:"error",warning:"warning"},v={success:p.CheckCircleIcon,info:p.InfoIcon,error:p.ErrorIcon,warning:p.WarningIcon};function o(){function e(e){var t;e&&e.message&&(t=10<(t=e.message.length)?4e3+200*t:4e3,r(!0),a(t),c(e.message),u(e.type))}var t=f(Object(m.useState)(!1),2),n=t[0],r=t[1],o=(l=f(Object(m.useState)(6e3),2))[0],a=l[1],i=(s=f(Object(m.useState)(null),2))[0],c=s[1],l=(t=f(Object(m.useState)(null),2))[0],u=t[1],s=function(){r(!1)};return Object(m.useEffect)(function(){return p.Alert.onMessage(e),function(){p.Alert.offMessage(e)}}),l?(t=v[l],y.a.createElement(p.Snackbar,{className:"snackbar",anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:o,onClose:s},y.a.createElement(p.SnackbarContent,{className:g[l],"aria-describedby":"client-snackbar",message:y.a.createElement("span",{id:"client-snackbar",className:"message"},y.a.createElement(t,{className:"msg-icon"}),i),action:[y.a.createElement(p.IconButton,{className:"close-btn",key:"close","aria-label":"Close",color:"inherit",onClick:s},y.a.createElement(p.CloseIcon,{className:"close-icon"}))]}))):null}n={id:"snackbar-app",createApp:Object(p.createApp)(function(){return y.a.createElement("div",null,y.a.createElement(r,null),y.a.createElement(o,null))}),renderMode:"C"};Object(p.renderApp)(n)},111:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n(0),i=n.n(a);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,u(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(e,a["Component"]),t=e,(n=[{key:"render",value:function(){return i.a.createElement("div",{className:"page-footer"},i.a.createElement("div",{className:"friend-links"},i.a.createElement("span",null,"友情链接："),i.a.createElement("a",{href:"http://cskaoyan.com",target:"_blank",title:"王道考研论坛"},"王道论坛")),i.a.createElement(o.Typography,{className:"cr"},"©2022 · 乐码范 · ",i.a.createElement("a",{href:"http://www.beian.miit.gov.cn",target:"_blank"},"粤ICP备19138429号-1")))}}])&&c(t.prototype,n),r&&c(t,r),e}(),n={id:"page-footer",createApp:Object(o.createApp)(n),renderMode:"C",createCacheKey:function(){return""}};Object(o.renderApp)(n)},112:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n(0),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(e=u(n).call(this,e))||"object"!==c(e)&&"function"!=typeof e?s(t):e).state={state:"hidden"},e.show=e.show.bind(s(e)),e.hide=e.hide.bind(s(e)),e.toHiddenState=e.toHiddenState.bind(s(e)),e.count=0,e.runningTimerId=null,e.hidingTimerId=null,e}var e,t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a["Component"]),e=n,(t=[{key:"show",value:function(){var e,t;1<++this.count||(clearTimeout(this.hidingTimerId),t=(e=this.refs.element).querySelector(".progress"),e.setAttribute("data-state","hidden"),t.outerHTML=t.outerHTML,e.offsetHeight,e.setAttribute("data-state",""),e.offsetHeight,e.setAttribute("data-state","running"))}},{key:"hide",value:function(){0<--this.count||(this.refs.element.setAttribute("data-state","finishing"),this.hidingTimerId=setTimeout(this.toHiddenState,500))}},{key:"toHiddenState",value:function(){this.refs.element.setAttribute("data-state","hidden")}},{key:"componentDidMount",value:function(){o.PjaxUtil.onEvents(this.show,this.hide)}},{key:"componentWillUnmount",value:function(){o.PjaxUtil.offEvents(this.show,this.hide)}},{key:"render",value:function(){return i.a.createElement("div",{className:"progress-bar","data-state":this.state.state,ref:"element"},i.a.createElement("div",{className:"progress"}))}}])&&l(e.prototype,t),r&&l(e,r),n}(),n={id:"progress-bar-app",createApp:Object(o.createApp)(n),renderMode:"C"};Object(o.renderApp)(n)},113:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n(0),i=n.n(a);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,u(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(e,a["Component"]),t=e,(n=[{key:"render",value:function(){return i.a.createElement("div",{className:"user-welcome"},i.a.createElement("div",{className:"content"},i.a.createElement(o.Typography,{component:"h1",className:"title"},"欢迎来到乐码范",i.a.createElement("br",null),i.a.createElement(o.Typography,{component:"em",className:"sub-title"},"编程学习圈子")),i.a.createElement(o.Typography,{className:"desc"},"沉淀编程经验，加上免费、丰富的在线编程教程和题库，让学习编程不再困难。"),i.a.createElement("div",null,i.a.createElement(o.Button,{variant:"contained",color:"primary",href:"/courses"},"查看课程"))))}}])&&c(t.prototype,n),r&&c(t,r),e}(),n={id:"user-welcome",createApp:Object(o.createApp)(n),renderMode:"S",createCacheKey:function(){return""}};Object(o.renderApp)(n)},2:function(e,t){e.exports=PropTypes},3:function(e,t){e.exports=mobx},52:function(e,t,n){n(86),n(111),n(112),n(105),n(87),n(113)},86:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n(0),i=n.n(a),r=n(2),t=n.n(r);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(e=u(n).call(this,e))||"object"!==c(e)&&"function"!=typeof e?s(t):e).clickLogout=e.clickLogout.bind(s(e)),e.handleOpen=e.handleOpen.bind(s(e)),e.handleClose=e.handleClose.bind(s(e)),e.state={anchorEl:null},e}var e,t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a["Component"]),e=n,(t=[{key:"handleOpen",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"clickManage",value:function(){o.PjaxUtil.navigateTo("/admin/home")}},{key:"clickSetting",value:function(){o.PjaxUtil.navigateTo("/user/profile")}},{key:"clickLogout",value:function(){this.props.store.logout()}},{key:"getAvatar",value:function(){var e=this.props.store.avatar;return e&&0<e.length?i.a.createElement(o.Avatar,{src:e,className:"avatar",onClick:this.handleOpen}):i.a.createElement(o.Avatar,{icon:"person",className:"avatar",onClick:this.handleOpen})}},{key:"getMenuItem",value:function(e,t,n){return i.a.createElement(o.MenuItem,{key:e,className:"menu-item",onClick:n},i.a.createElement(o.ListItemIcon,null,i.a.createElement(t,null)),i.a.createElement("span",null,e))}},{key:"render",value:function(){var e=this.props.store.admin,t=this.state.anchorEl;return i.a.createElement("div",{className:"profile-menu"},this.getAvatar(),i.a.createElement(o.Menu,{anchorEl:t,open:null!==t,onClose:this.handleClose},e?this.getMenuItem("管理员",o.TrendingUpIcon,this.clickManage):null,this.getMenuItem("设置",o.SettingsIcon,this.clickSetting),i.a.createElement(o.Divider,null),this.getMenuItem("退出",o.PowerSettingsNewIcon,this.clickLogout)))}}])&&l(e.prototype,t),r&&l(e,r),n}();r.propTypes={store:t.a.object};var p=Object(o.observeComponent)(r);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(e=b(n).call(this,e))||"object"!==m(e)&&"function"!=typeof e?h(t):e).handleOpen=e.handleOpen.bind(h(e)),e.handleClose=e.handleClose.bind(h(e)),e.createStory=e.createStory.bind(h(e)),e.createCourse=e.createCourse.bind(h(e)),e.createQuestionBank=e.createQuestionBank.bind(h(e)),e.state={anchorEl:null},e}var e,t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,a["Component"]),e=n,(t=[{key:"handleOpen",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"createStory",value:function(){o.PjaxUtil.navigateTo("/post/create")}},{key:"createCourse",value:function(){o.PjaxUtil.navigateTo("/course/create")}},{key:"createQuestionBank",value:function(){o.PjaxUtil.navigateTo("/question-bank/create")}},{key:"getMenuItem",value:function(e,t,n,r){return i.a.createElement(o.MenuItem,{key:e,className:"menu-item",onClick:r},i.a.createElement(o.ListItemIcon,null,i.a.createElement(t,null)),i.a.createElement("div",{className:"item-wrapper"},i.a.createElement("h5",{className:"head"},e),i.a.createElement("span",{className:"desc"},n)))}},{key:"render",value:function(){var e=this.state.anchorEl;return i.a.createElement("div",{className:"create-menu"},i.a.createElement(o.Button,{variant:"outlined",className:"button",color:"primary",onClick:this.handleOpen},"创建"),i.a.createElement(o.Menu,{anchorEl:e,open:null!==e,onClose:this.handleClose},this.getMenuItem("写故事",o.PagesIcon,"今天学了什么，或者增加了什么经验",this.createStory),this.getMenuItem("创建课程",o.ClassIcon,"讲一些你擅长的、喜欢的东西",this.createCourse),this.getMenuItem("创建题库",o.ListAltIcon,"持续积累自己的题目，方便刷题练习",this.createQuestionBank)))}}])&&y(e.prototype,t),r&&y(e,r),n}(),g=Object(o.observeComponent)(r);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(e=E(n).call(this,e))||"object"!==v(e)&&"function"!=typeof e?j(t):e).clickLogout=e.clickLogout.bind(j(e)),e}var e,t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(n,a["Component"]),e=n,(t=[{key:"componentDidMount",value:function(){this.props.store.postLoad()}},{key:"clickLogout",value:function(){this.props.store.logout()}},{key:"getLink",value:function(e,t){var n="menu-item";return this.props.store.path===t&&(n+=" active"),i.a.createElement(o.A,{key:e,className:n,href:t},e)}},{key:"getNotifyIcon",value:function(e){return e.loaded&&e.isAuthenticated&&e.msgCount?e.msgCount<1?i.a.createElement(o.IconButton,{color:"inherit",className:"notify-icon",onClick:function(){o.PjaxUtil.navigateTo("/my-messages")}},i.a.createElement(o.NotificationsNoneIcon,null)):i.a.createElement(o.IconButton,{color:"inherit",className:"notify-icon",onClick:function(){o.PjaxUtil.navigateTo("/my-messages")}},i.a.createElement(o.Badge,{color:"secondary",badgeContent:e.msgCount},i.a.createElement(o.NotificationsNoneIcon,null))):null}},{key:"getCreateMenu",value:function(e){return e.loaded&&e.isAuthenticated&&e.admin?i.a.createElement(g,{key:"createMenu"}):null}},{key:"getProfileMenu",value:function(e){return e.loaded&&e.isAuthenticated?i.a.createElement(p,{key:"profileMenu"}):null}},{key:"getLoginLink",value:function(e){return!e.loaded||e.isAuthenticated?null:i.a.createElement(o.Button,{variant:"outlined",color:"primary",onClick:o.PjaxUtil.gotoLogin},"登录")}},{key:"getRegLink",value:function(e){return!e.loaded||e.isAuthenticated?null:i.a.createElement(o.Button,{color:"primary",href:"/signup",className:"link"},"注册")}},{key:"render",value:function(){var e=this.props.store;return i.a.createElement("div",{className:"page-header"},i.a.createElement(o.AppBar,{position:"static",className:"app-bar"},i.a.createElement(o.Toolbar,{variant:"dense"},i.a.createElement(o.IconButton,{"aria-label":"Menu","data-id":"Menu",className:"menu-btn",onClick:o.EventHelper.showMainNav},i.a.createElement(o.MenuIcon,null)),i.a.createElement(o.A,{className:"logo",href:"/"},i.a.createElement("img",{className:"logo",src:"/images/logo.png"})),i.a.createElement("div",{id:"globalMenu",className:"menu"},this.getLink("首页","/"),this.getLink("课程","/courses"),this.getLink("题库","/question-banks")),i.a.createElement(o.Typography,{color:"inherit",className:"grow"}),this.getRegLink(e),this.getLoginLink(e),this.getNotifyIcon(e),this.getCreateMenu(e),this.getProfileMenu(e))))}}])&&O(e.prototype,t),r&&O(e,r),n}();r.propTypes={store:t.a.object};var r=Object(o.observeComponent)(r),w=n(3),n={isAuthenticated:!1,nickname:"无名",isOpen:!1,toggle:"collapse",loaded:!1,path:"",admin:!1,msgCount:0,postLoad:Object(w.action)(function(){this.loaded=!0,this.path=window.location.pathname;var e=o.UserUtil.getCurrentUser();e&&(this.isAuthenticated=!0,this.avatar=e.avatar,this.admin=99===e.role,(e=e.name)&&(this.nickname=e),this.updateMessageCount())}),updateMessageCount:Object(w.action)(function(){var t=this;if(!this.isAuthenticated)return null;var e=Object(w.action)(function(e){t.msgCount=e});return new o.DataRepository(this.contextId).getNewMessageCount().then(e)}),logout:Object(w.action)(function(){var e=new o.DataRepository(this.contextId);this.isAuthenticated=!1,e.logout().then(function(){o.PjaxUtil.navigateTo("/")})}),showLoginPanel:Object(w.action)(function(e){this.isOpen=e}),toggleMenu:Object(w.action)(function(){this.toggle="collapse"===this.toggle?"expand":"collapse"})},n=Object(o.createMobxStore)(n),n={id:"page-header",createApp:Object(o.createMobxApp)(r,n),renderMode:"A",createCacheKey:function(){return""}};Object(o.renderApp)(n)},87:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),c=n.n(i),r=n(2),t=n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=[{icon:a.EqualizerIcon,label:"信息统计",url:"/admin/home"},{icon:a.PeopleIcon,label:"用户管理",url:"/admin/user-management"},{icon:a.ViewModuleIcon,label:"课程管理",url:"/admin/courses-management"},{icon:a.FilterVintageIcon,label:"话题管理",url:"/admin/topic-management"},{icon:a.LocalOfferIcon,label:"标签管理",url:"/admin/tag-management"},{icon:a.ReportIcon,label:"审核管理",url:"/admin/review-management"}],r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,s(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(e,c.a.Component),t=e,(n=[{key:"getLink",value:function(e,t,n){var r="item";this.props.store.path===n&&(r+=" active");return c.a.createElement(a.ListItem,{className:r,key:n,button:!0,onClick:function(){a.PjaxUtil.navigateTo(n)}},c.a.createElement(a.ListItemIcon,{className:"item-icon"},c.a.createElement(t,{className:"icon"})),c.a.createElement(a.ListItemText,{className:"text",primary:e}))}},{key:"getAdminLinks",value:function(e){var t=this;return e.isAdmin?p.map(function(e){return t.getLink(e.label,e.icon,e.url)}):null}},{key:"getCourses",value:function(e){var t=e.myCourses;if(!t||0===t.length)return null;e=t.map(function(e){var t="/courses/".concat(e.id);return c.a.createElement(a.ListItem,{key:e.id,button:!0,dense:!0,onClick:function(){a.PjaxUtil.navigateTo(t)}},c.a.createElement(a.Avatar,{alt:e.title,src:e.image}),c.a.createElement(a.ListItemText,{primary:e.title}))}),t=[];return t.push(c.a.createElement("ul",{key:"courses",className:"course-list"},e)),c.a.createElement(a.List,{component:"nav",subheader:c.a.createElement(a.ListSubheader,null,"我的课程")},t)}},{key:"render",value:function(){var e=this.props.store;return c.a.createElement(a.List,{component:"nav",className:"global-nav-list"},this.getLink("首页",a.HomeIcon,"/"),this.getLink("课程",a.LibraryBooksIcon,"/courses"),this.getLink("题库",a.DnsIcon,"/question-banks"),this.getLink("工具",a.StyleIcon,"/tools/primary-math"),e.isTeacher?this.getLink("课程草稿",a.DraftsIcon,"/course-drafts"):null,e.isTeacher?this.getLink("题库草稿",a.FeaturedPlayListIcon,"/question-bank-drafts"):null,this.getAdminLinks(e))}}])&&l(t.prototype,n),r&&l(t,r),e}();r.propTypes={store:t.a.object};var m=Object(a.observeComponent)(r);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,d(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(e,i["Component"]),t=e,(n=[{key:"getAvatar",value:function(e){var t=e.user,e=null,e=t.avatar?c.a.createElement(a.Avatar,{src:t.avatar,className:"avatar",onClick:this.handleOpen}):c.a.createElement(a.Avatar,{icon:"person",className:"avatar",onClick:this.handleOpen});return c.a.createElement("div",{className:"avatar-wrapper"},e,c.a.createElement("span",null,t.name))}},{key:"render",value:function(){var e=this.props.store;if(e.showSlogan)return null;var t=e.statistics;return c.a.createElement("div",{className:"user-profile"},this.getAvatar(e),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("p",{className:"link"},c.a.createElement("span",null,"学过课程"),c.a.createElement("b",null,t.courses||0))),c.a.createElement("div",null,c.a.createElement("p",{className:"link"},c.a.createElement("span",null,"练习题库"),c.a.createElement("b",null,t.banks||0))),c.a.createElement("div",null,c.a.createElement("p",{className:"link"},c.a.createElement("span",null,"发表帖子"),c.a.createElement("b",null,t.posts||0))),c.a.createElement("div",null,c.a.createElement("p",{className:"link"},c.a.createElement("span",null,"发表评论"),c.a.createElement("b",null,t.comments||0)))))}}])&&b(t.prototype,n),r&&b(t,r),e}();r.propTypes={store:t.a.object};var v=Object(a.observeComponent)(r);function O(e){var t=e.store;function n(){t.toggleDrawer(!0)}function r(){t.toggleDrawer(!1)}function o(e){e=e?"hide":"show";return c.a.createElement("div",{className:e},c.a.createElement(m,null),c.a.createElement(v,null))}return Object(i.useEffect)(function(){return t.postMount(),a.EventHelper.onShowMainNav(n),function(){a.EventHelper.offShowMainNav(n)}},[]),c.a.createElement("div",{className:"global-nav"},o(t.hide),c.a.createElement(a.Drawer,{open:t.drawerOpen,onClose:r},c.a.createElement("div",{tabIndex:0,role:"button",onClick:r,onKeyDown:r},o())))}O.propTypes={store:t.a.object};var t=Object(a.observeComponent)(O),E=n(3),n={isAdmin:!1,isTeacher:!1,myCourses:[],showSlogan:!0,path:"",user:{},loaded:!1,drawerOpen:!1,hide:!1,statistics:{},postMount:Object(E.action)(function(){var t=this;this.loaded=!0,this.path=window.location.pathname;var e=a.UserUtil.getCurrentUser();e&&(this.showSlogan=!1,this.user=e,a.RestClient.getUserStatisticClient().find().then(Object(E.action)(function(e){e.success&&(t.statistics=e.data)})))}),toggleDrawer:Object(E.action)(function(e){this.drawerOpen=e})},n=Object(a.createMobxStore)(n),n={id:"global-nav-app",createApp:Object(a.createMobxApp)(t,n),renderMode:"A"};Object(a.renderApp)(n)}});
//# sourceMappingURL=dora-apps.js.map