<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <title>云朵字生成器</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./src/all.css">
    </head>
    
    <body>
        <div class="app-container">            
            <div class="app-content">
                <!-- 控制面板 - 第一行3列 -->
                <div class="controls-panel">
                    <h2>☁️ 云朵字生成器</h2>
                    <div class="control-group wenzi">
                        <div class="control-item">
                            <label>内容</label>
                            <input type="text" id="textInput" value="edui123" placeholder="输入您想要设计的文字...">
                        </div>
                        <div class="control-item">
                            <label>字体</label>
                            <select id="fontSelect">
                                <optgroup label="系统字体">
                                    <option value="ABeeZee-Italic" selected>ABeeZee</option>
                                    <option value="ABeeZee-Regular">ABeeZee（常规）</option>
                                    <option value="XuMin">徐珉体</option>
                                    <option value="Comic Sans MS">Comic Sans MS</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                </optgroup>
                                <optgroup label="在线字体" id="onlineFontsGroup">
                                    <!-- 在线字体选项将通过JavaScript动态生成 -->
                                </optgroup>
                            </select>
                        </div>
                        <div class="control-item">
                            <label>本地</label>
                            <input type="file" id="fontFile" accept=".ttf,.otf,.woff,.woff2">
                        </div>
                        <div class="control-item">
                            <label>字重</label>
                            <div class="range-container">
                                <input type="range" id="fontWeight" min="100" max="900" value="400" step="100">
                                <span class="range-value" id="fontWeightValue">400</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>字号</label>
                            <div class="range-container">
                                <input type="range" id="fontSize" min="50" max="500" value="255">
                                <span class="range-value" id="fontSizeValue">255</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>间距</label>
                            <div class="range-container">
                                <input type="range" id="letterSpacing" min="-30" max="80" value="0">
                                <span class="range-value" id="letterSpacingValue">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="controls-neiwai-panel">
                <div class="controls-panel">
                    <h3>🛞 内外厚度</h3>
                    <div class="control-group neiwai">
                        <div class="control-item">
                            <label>内层</label>
                            <div class="range-container">
                                <input type="range" id="whiteSize" min="5" max="100" value="50" step="5">
                                <span class="range-value" id="whiteSizeValue">50</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>外层</label>
                            <div class="range-container">
                                <input type="range" id="outlineSize" min="5" max="100" value="50" step="5">
                                <span class="range-value" id="outlineSizeValue">50</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>🎨 颜色调整</h3>
                    <div class="control-group yanse">
                        <div class="control-item">
                            <label>外层</label>
                            <input type="color" id="outlineColor" value="#ff6b6b">
                        </div>
                        <div class="control-item">
                            <label>内层</label>
                            <input type="color" id="innerColor" value="#ffffff">
                        </div>
                        <div class="control-item">
                            <label>文字</label>
                            <input type="color" id="textColor" value="#333333">
                        </div>
                    </div>
                </div>
                </div>
                
                <div class="download-section">
                    <button onclick="downloadSingle()">💾 下载高清透明图片</button>
                </div>
                <!-- 实时预览区域 - 第三行整行 -->
                <div class="preview-section">
                    <canvas id="previewCanvas" width="1200" height="500"></canvas>
                </div>


                <div class="controls-panel online-fonts">
                    <h3>🔗 在线字体</h3>
                    <div class="control-group" id="onlineFontsContainer">
                        <!-- 在线字体按钮将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    
        <script>
const _0x39d1=['url(','MaokenZhuyuanTi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20visibility:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2072px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20','cursor','点击加载','mousedown','https://fontsapi.zeoseven.com/92/main/result.css','https://fontsapi.zeoseven.com/46/main/result.css','汇迹正楷','\x22,\x20monospace','沐瑶随心手写体','Smiley\x20Sans\x20Oblique','text','online-font-option','onerror','dataset','outlineSizeValue','ToneOZ-Pinyin-WenKai-Regular','div','innerColor','options','actualBoundingBoxDescent','max','button','Mengshen-Handwritten','letterSpacing','测试字体ABCabc','addEventListener','字体不可用','key','min','touches','font-change-notification','https://fontsapi.zeoseven.com/236/main/result.css','预览已重新渲染','offsetWidth','字体加载失败:\x20','option','filter','fontWeight','select','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22load-status\x22>点击加载</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','top','className','cssText','onlineFontsContainer','length','https://fontsapi.zeoseven.com/477/main/result.css','slice','textColor','朱雀仿宋','getContext','head','width','style','寒蝉半圆体','正在加载\x20','add','dispatchEvent','https://fontsapi.zeoseven.com/5/main/result.css','font','文鼎楷体','fonts','https://fontsapi.zeoseven.com/41/main/result.css','加载失败','字体加载超时','disabled','touchmove','无法从本地存储读取:','fontSize','createElement','classList','Huiwen-mincho','catch','loaded','上图东观体','textInput','files','actualBoundingBoxAscent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x202000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20fadeInOut\x201.5s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.load-status','name','then','querySelectorAll','雷盖体','cloudText_settings','load','https://fontsapi.zeoseven.com/84/main/result.css','has','toDataURL','message','href','clientY','DouyinSans','appendChild','https://fontsapi.zeoseven.com/494/main/result.css','move','destination-out','#loading-tip-style','forEach','monospace','innerHTML','getElementById','touchend','strokeText','lineWidth','.font-load-btn','https://fontsapi.zeoseven.com/243/main/result.css','getBoundingClientRect','warn','measureText','color','.font-loading-tip','whiteSize','平方公子体','outlineSize','Reggae','remove','https://fontsapi.zeoseven.com/488/main/result.css','澳声通拼音文楷','MuyaoPleased','textContent','ArrowDown','findIndex','clientX','letterSpacingValue','Unifont','setAttribute','font-change-notification-style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20slideIn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20from\x20{\x20transform:\x20translateX(100%);\x20opacity:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20to\x20{\x20transform:\x20translateX(0);\x20opacity:\x201;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','https://fontsapi.zeoseven.com/572/main/result.css','https://fontsapi.zeoseven.com/121/main/result.css','toTimeString','querySelector','临海隶书','lineCap','#000','left','canvas','AR\x20PL\x20UKai\x20CN','全字库正楷体','error','none','outlineColor','云峰飞云体','change','clearRect','preventDefault','汇文明朝体','px\x20\x22','split','textBaseline','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-name\x22>','fillStyle','image/png','value','.font-change-notification','CSS加载失败','cloudText_content','data','\x20字体加载失败','globalCompositeOperation','input','font-load-btn','file','click','rel','height','fontSelect'];const _0x4f50=function(_0x39d12f,_0x4f5031){_0x39d12f=_0x39d12f-0x0;let _0x364263=_0x39d1[_0x39d12f];return _0x364263;};let currentDesign=null;let batchItems=[];const previewCanvas=document['getElementById']('previewCanvas');const ctx=previewCanvas['getContext']('2d');let isDragging=![];let dragStartX=0x0;let dragStartY=0x0;let offsetX=0x0;let offsetY=0x0;let lastTouchX=0x0;let lastTouchY=0x0;const loadedFonts=new Set();const onlineFonts=[{'id':'YEFONTXiaoShiTou','name':'小石头体','cssUrl':_0x4f50('0x7')},{'id':'TsangerXWZ','name':'仓耳小丸子','cssUrl':_0x4f50('0x2f')},{'id':_0x4f50('0x1'),'name':'猫啃珠圆体','cssUrl':'https://fontsapi.zeoseven.com/88/main/result.css'},{'id':_0x4f50('0x37'),'name':_0x4f50('0x37'),'cssUrl':_0x4f50('0x6b')},{'id':_0x4f50('0x18'),'name':'萌神拼音体','cssUrl':'https://fontsapi.zeoseven.com/137/main/result.css'},{'id':_0x4f50('0x11'),'name':_0x4f50('0x77'),'cssUrl':'https://fontsapi.zeoseven.com/600/main/result.css'},{'id':_0x4f50('0x7e'),'name':'像素字体','cssUrl':_0x4f50('0x82')},{'id':_0x4f50('0x74'),'name':_0x4f50('0x54'),'cssUrl':'https://fontsapi.zeoseven.com/102/main/result.css'},{'id':'DaBaoTaoTaoTi','name':'大宝桃桃体','cssUrl':_0x4f50('0x3f')},{'id':_0x4f50('0x78'),'name':_0x4f50('0xa'),'cssUrl':_0x4f50('0x83')},{'id':'huangkaihuaLawyerfont','name':'黄凯桦手写体','cssUrl':'https://fontsapi.zeoseven.com/223/main/result.css'},{'id':'YFFYT','name':_0x4f50('0x90'),'cssUrl':'https://fontsapi.zeoseven.com/446/main/result.css'},{'id':'PING\x20FANG\x20GONG\x20ZI\x20TI','name':_0x4f50('0x72'),'cssUrl':_0x4f50('0x5f')},{'id':_0x4f50('0x5d'),'name':'抖音美好体','cssUrl':_0x4f50('0x57')},{'id':'STDongGuanTi','name':_0x4f50('0x4b'),'cssUrl':_0x4f50('0x76')},{'id':'ChillKai','name':'寒蝉正楷体','cssUrl':_0x4f50('0x3b')},{'id':_0x4f50('0x8b'),'name':_0x4f50('0x3d'),'cssUrl':'https://fontsapi.zeoseven.com/577/main/result.css'},{'id':'CooperZhengKai','name':_0x4f50('0x8'),'cssUrl':'https://fontsapi.zeoseven.com/482/main/result.css'},{'id':'TW-Kai','name':_0x4f50('0x8c'),'cssUrl':'https://fontsapi.zeoseven.com/36/main/result.css'},{'id':'KingHwa_OldSong','name':'京华老宋体','cssUrl':'https://fontsapi.zeoseven.com/309/main/result.css'},{'id':'Noto\x20Serif\x20CJK','name':'思源宋体','cssUrl':'https://fontsapi.zeoseven.com/285/main/result.css'},{'id':'Zhuque\x20Fangsong\x20(technical\x20preview)','name':_0x4f50('0x32'),'cssUrl':'https://fontsapi.zeoseven.com/7/main/result.css'},{'id':_0x4f50('0xb'),'name':'得意黑','cssUrl':_0x4f50('0x6')},{'id':_0x4f50('0x48'),'name':_0x4f50('0x94'),'cssUrl':'https://fontsapi.zeoseven.com/256/main/result.css'},{'id':'峄山碑篆体','name':'峄山碑篆体','cssUrl':_0x4f50('0x21')},{'id':'临海体','name':_0x4f50('0x86'),'cssUrl':'https://fontsapi.zeoseven.com/229/main/result.css'},{'id':'CaoShu\x20Simp2Trad','name':'草书','cssUrl':'https://fontsapi.zeoseven.com/107/main/result.css'}];function generateOnlineFontsHTML(){const _0x46e54f=document['getElementById']('onlineFontsGroup');_0x46e54f[_0x4f50('0x65')]='';onlineFonts['forEach'](_0x325aa2=>{const _0x3c888d=document['createElement'](_0x4f50('0x25'));_0x3c888d[_0x4f50('0x9b')]=_0x325aa2['id'];_0x3c888d[_0x4f50('0x79')]=_0x325aa2['name'];_0x3c888d[_0x4f50('0x42')]=!![];_0x3c888d[_0x4f50('0x2b')]=_0x4f50('0xd');_0x46e54f['appendChild'](_0x3c888d);});const _0x79a1d1=document[_0x4f50('0x66')](_0x4f50('0x2d'));_0x79a1d1['innerHTML']='';onlineFonts['forEach'](_0x973213=>{const _0x19b1bc=document['createElement'](_0x4f50('0x17'));_0x19b1bc['className']=_0x4f50('0xa3');_0x19b1bc[_0x4f50('0x7f')]('data-font',_0x973213['id']);_0x19b1bc[_0x4f50('0x7f')]('data-name',_0x973213[_0x4f50('0x51')]);_0x19b1bc[_0x4f50('0x65')]=_0x4f50('0x98')+_0x973213['name']+_0x4f50('0x29');_0x79a1d1[_0x4f50('0x5e')](_0x19b1bc);});}function showLoadingTip(_0x5d5f82){const _0x3bb676=document[_0x4f50('0x85')](_0x4f50('0x70'));if(_0x3bb676){_0x3bb676[_0x4f50('0x75')]();}const _0x57d7a4=document['createElement'](_0x4f50('0x12'));_0x57d7a4[_0x4f50('0x2b')]='font-loading-tip';_0x57d7a4[_0x4f50('0x36')][_0x4f50('0x2c')]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(102,\x20126,\x20234,\x200.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.15);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20slideIn\x200.3s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x57d7a4['textContent']=_0x5d5f82;document['body']['appendChild'](_0x57d7a4);if(!document['querySelector'](_0x4f50('0x62'))){const _0xe56c79=document['createElement']('style');_0xe56c79['id']='loading-tip-style';_0xe56c79['textContent']=_0x4f50('0x81');document['head']['appendChild'](_0xe56c79);}return _0x57d7a4;}function hideLoadingTip(){const _0x53d42b=document[_0x4f50('0x85')]('.font-loading-tip');if(_0x53d42b){_0x53d42b['style']['animation']='slideIn\x200.3s\x20ease\x20reverse';setTimeout(()=>_0x53d42b[_0x4f50('0x75')](),0x12c);}}function checkFontAvailable(_0x13d50a){return new Promise(_0x1688a9=>{const _0x270bdf=document['createElement']('span');_0x270bdf['style']['cssText']=_0x4f50('0x2')+_0x13d50a+',\x20monospace;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x270bdf[_0x4f50('0x79')]=_0x4f50('0x1a');document['body'][_0x4f50('0x5e')](_0x270bdf);_0x270bdf['style']['fontFamily']=_0x4f50('0x64');const _0x32099d=_0x270bdf[_0x4f50('0x23')];_0x270bdf[_0x4f50('0x36')]['fontFamily']='\x22'+_0x13d50a+_0x4f50('0x9');let _0x2ec514=0x0;const _0x2caece=0x32;const _0x374cc7=()=>{const _0x4af11f=_0x270bdf['offsetWidth'];_0x2ec514++;if(_0x4af11f!==_0x32099d||_0x2ec514>=_0x2caece){document['body']['removeChild'](_0x270bdf);_0x1688a9(_0x4af11f!==_0x32099d);}else{setTimeout(_0x374cc7,0x64);}};_0x374cc7();});}function loadOnlineFont(_0x1c77c2){if(loadedFonts[_0x4f50('0x58')](_0x1c77c2)){return Promise['resolve']();}const _0x1b6604=onlineFonts['find'](_0x264bb6=>_0x264bb6['id']===_0x1c77c2);if(!_0x1b6604){return Promise['resolve']();}const {cssUrl,name:_0x2d68e8}=_0x1b6604;if(cssUrl){const _0x300cfd=showLoadingTip(_0x4f50('0x38')+_0x2d68e8+'\x20字体...');const _0x23abbb=Date['now']();return new Promise((_0x868e3f,_0x2cd394)=>{const _0x27abb9=document['createElement']('link');_0x27abb9[_0x4f50('0xa6')]='stylesheet';_0x27abb9['href']=cssUrl;const _0x110ee3=setTimeout(()=>{hideLoadingTip();showLoadingTip(_0x2d68e8+'\x20字体加载超时');setTimeout(hideLoadingTip,0x7d0);_0x2cd394(new Error(_0x4f50('0x41')));},0x2710);_0x27abb9['onload']=()=>{clearTimeout(_0x110ee3);checkFontAvailable(_0x1c77c2)[_0x4f50('0x52')](_0x52c646=>{const _0x28ee6d=Date['now']()-_0x23abbb;const _0x2b6d5f=0xbb8;const _0x53f256=Math[_0x4f50('0x16')](0x0,_0x2b6d5f-_0x28ee6d);setTimeout(()=>{hideLoadingTip();if(_0x52c646){loadedFonts[_0x4f50('0x39')](_0x1c77c2);showLoadingTip(_0x2d68e8+'\x20字体加载成功！');setTimeout(hideLoadingTip,0x7d0);_0x868e3f();}else{showLoadingTip(_0x2d68e8+_0x4f50('0xa0'));setTimeout(hideLoadingTip,0xbb8);_0x2cd394(new Error(_0x4f50('0x1c')));}},_0x53f256);});};_0x27abb9[_0x4f50('0xe')]=()=>{clearTimeout(_0x110ee3);hideLoadingTip();showLoadingTip(_0x2d68e8+_0x4f50('0xa0'));setTimeout(hideLoadingTip,0xbb8);_0x2cd394(new Error(_0x4f50('0x9d')));};document[_0x4f50('0x34')][_0x4f50('0x5e')](_0x27abb9);});}return Promise['resolve']();}function initControls(){loadTextFromStorage();loadAllSettingsFromStorage();generateOnlineFontsHTML();const _0x5a10ca=document[_0x4f50('0x66')](_0x4f50('0xa8'));let _0x469a4a=_0x5a10ca['value'];_0x5a10ca['addEventListener']('change',function(){generatePreview();_0x469a4a=this[_0x4f50('0x9b')];});_0x5a10ca[_0x4f50('0x1b')]('click',function(){if(this[_0x4f50('0x9b')]===_0x469a4a&&this['value']){generatePreview();}});document[_0x4f50('0x53')](_0x4f50('0x6a'))['forEach'](_0x35f323=>{_0x35f323['addEventListener']('click',function(){const _0x50deaa=this[_0x4f50('0xf')][_0x4f50('0x3c')];const _0x186f18=this['dataset'][_0x4f50('0x51')];if(loadedFonts[_0x4f50('0x58')](_0x50deaa)){document['getElementById'](_0x4f50('0xa8'))[_0x4f50('0x9b')]=_0x50deaa;document[_0x4f50('0x3e')]['ready']['then'](()=>{setTimeout(()=>{generatePreview();},0x64);});return;}this['classList']['add']('loading');this[_0x4f50('0x85')](_0x4f50('0x50'))[_0x4f50('0x79')]='加载中...';this['disabled']=!![];loadOnlineFont(_0x50deaa)['then'](()=>{this[_0x4f50('0x47')]['remove']('loading');this['classList'][_0x4f50('0x39')](_0x4f50('0x4a'));this['querySelector'](_0x4f50('0x50'))['textContent']='已加载';this[_0x4f50('0x42')]=![];const _0x3eae25=document['querySelector']('option[value=\x22'+_0x50deaa+'\x22]');if(_0x3eae25){_0x3eae25['disabled']=![];_0x3eae25[_0x4f50('0x36')][_0x4f50('0x6f')]=_0x4f50('0x88');_0x3eae25['style']['fontStyle']='normal';}})[_0x4f50('0x49')](_0x47e4d2=>{console['error']('字体加载失败:',_0x47e4d2);this[_0x4f50('0x47')][_0x4f50('0x75')]('loading');this['classList']['add']('error');this[_0x4f50('0x85')]('.load-status')[_0x4f50('0x79')]=_0x4f50('0x40');this[_0x4f50('0x42')]=![];setTimeout(()=>{this['classList'][_0x4f50('0x75')](_0x4f50('0x8d'));this[_0x4f50('0x85')]('.load-status')['textContent']=_0x4f50('0x4');},0xbb8);});});});document[_0x4f50('0x53')](_0x4f50('0xa2'))[_0x4f50('0x63')](_0x5ad6de=>{_0x5ad6de['addEventListener'](_0x4f50('0xa2'),function(){generatePreview();if(this['id']==='textInput'){saveTextToStorage(this['value']);}if(this['type']!==_0x4f50('0xa4')){saveAllSettingsToStorage();}});});document[_0x4f50('0x53')](_0x4f50('0x28'))['forEach'](_0x120610=>{_0x120610['addEventListener']('change',function(){generatePreview();saveAllSettingsToStorage();});});linkRangeValue('outlineSize','outlineSizeValue');linkRangeValue('whiteSize','whiteSizeValue');linkRangeValue('fontSize','fontSizeValue');linkRangeValue('letterSpacing','letterSpacingValue');linkRangeValue('fontWeight','fontWeightValue');addFontSelectKeyboardShortcuts();}function addFontSelectKeyboardShortcuts(){const _0xd13b51=document[_0x4f50('0x66')]('fontSelect');document[_0x4f50('0x1b')]('keydown',function(_0x2b5855){const _0x3ce91a=Array['from'](_0xd13b51[_0x4f50('0x14')])[_0x4f50('0x26')](_0x2f5265=>!_0x2f5265['disabled']);const _0x363039=_0x3ce91a[_0x4f50('0x7b')](_0x38b109=>_0x38b109['value']===_0xd13b51[_0x4f50('0x9b')]);switch(_0x2b5855[_0x4f50('0x1d')]){case'ArrowUp':_0x2b5855[_0x4f50('0x93')]();if(_0x363039>0x0){_0xd13b51[_0x4f50('0x9b')]=_0x3ce91a[_0x363039-0x1][_0x4f50('0x9b')];_0xd13b51[_0x4f50('0x3a')](new Event(_0x4f50('0x91')));showFontChangeNotification(_0x3ce91a[_0x363039-0x1][_0x4f50('0x79')]);}break;case _0x4f50('0x7a'):_0x2b5855[_0x4f50('0x93')]();if(_0x363039<_0x3ce91a[_0x4f50('0x2e')]-0x1){_0xd13b51['value']=_0x3ce91a[_0x363039+0x1][_0x4f50('0x9b')];_0xd13b51['dispatchEvent'](new Event(_0x4f50('0x91')));showFontChangeNotification(_0x3ce91a[_0x363039+0x1]['textContent']);}break;case'\x20':_0x2b5855[_0x4f50('0x93')]();generatePreview();showFontChangeNotification(_0x4f50('0x22'));break;}});}function showFontChangeNotification(_0x16a090){const _0x52c533=document['querySelector'](_0x4f50('0x9c'));if(_0x52c533){_0x52c533[_0x4f50('0x75')]();}const _0x216b57=document['createElement'](_0x4f50('0x12'));_0x216b57[_0x4f50('0x2b')]=_0x4f50('0x20');_0x216b57['style']['cssText']=_0x4f50('0x4f');_0x216b57[_0x4f50('0x79')]=_0x16a090;document['body'][_0x4f50('0x5e')](_0x216b57);if(!document[_0x4f50('0x85')]('#font-change-notification-style')){const _0x21b695=document['createElement']('style');_0x21b695['id']=_0x4f50('0x80');_0x21b695[_0x4f50('0x79')]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20fadeInOut\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20opacity:\x200;\x20transform:\x20translate(-50%,\x20-50%)\x20scale(0.8);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2020%\x20{\x20opacity:\x201;\x20transform:\x20translate(-50%,\x20-50%)\x20scale(1);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2080%\x20{\x20opacity:\x201;\x20transform:\x20translate(-50%,\x20-50%)\x20scale(1);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20opacity:\x200;\x20transform:\x20translate(-50%,\x20-50%)\x20scale(0.8);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x4f50('0x34')]['appendChild'](_0x21b695);}setTimeout(()=>{if(_0x216b57['parentNode']){_0x216b57['remove']();}},0x5dc);}function linkRangeValue(_0xa82c97,_0x58d3a4){const _0x5ca40d=document[_0x4f50('0x66')](_0xa82c97);const _0x6a7992=document['getElementById'](_0x58d3a4);_0x5ca40d['addEventListener'](_0x4f50('0xa2'),()=>{if(_0xa82c97===_0x4f50('0x73')){const _0x4e4444=parseInt(document['getElementById'](_0x4f50('0x71'))['value']);const _0x559bec=parseInt(_0x5ca40d[_0x4f50('0x9b')]);_0x6a7992[_0x4f50('0x79')]=_0x4e4444+_0x559bec;}else{_0x6a7992['textContent']=_0x5ca40d[_0x4f50('0x9b')];}});if(_0xa82c97===_0x4f50('0x71')){_0x5ca40d[_0x4f50('0x1b')](_0x4f50('0xa2'),()=>{const _0x40c514=document[_0x4f50('0x66')]('outlineSizeValue');const _0x1ac904=parseInt(document[_0x4f50('0x66')]('outlineSize')[_0x4f50('0x9b')]);const _0x508847=parseInt(_0x5ca40d['value']);_0x40c514['textContent']=_0x508847+_0x1ac904;});}}function generatePreview(){const _0x3a9543=getParams();drawCloudText(ctx,_0x3a9543,0x1);currentDesign=_0x3a9543;}function downloadSingle(){if(!currentDesign)return;const _0x28a1c2=createCanvas(currentDesign,currentDesign['exportScale']);const _0x499846=trimCanvas(_0x28a1c2);const _0x6f7bcd=document[_0x4f50('0x46')]('a');const _0x45a05f=new Date();const _0x5bf2e4=_0x45a05f[_0x4f50('0x84')]()[_0x4f50('0x30')](0x0,0x8)['replace'](/:/g,'');_0x6f7bcd['download']=currentDesign[_0x4f50('0xc')]+'-'+_0x5bf2e4+'.png';_0x6f7bcd[_0x4f50('0x5b')]=_0x499846[_0x4f50('0x59')](_0x4f50('0x9a'));_0x6f7bcd[_0x4f50('0xa5')]();}function trimCanvas(_0xc29699){const _0x40fa9c=_0xc29699[_0x4f50('0x33')]('2d');const _0x45e66b=_0x40fa9c['getImageData'](0x0,0x0,_0xc29699[_0x4f50('0x35')],_0xc29699[_0x4f50('0xa7')]);const _0x46b315=_0x45e66b[_0x4f50('0x9f')];let _0x4691d1=_0xc29699[_0x4f50('0x35')];let _0x325830=_0xc29699[_0x4f50('0xa7')];let _0x1a9e3c=0x0;let _0xd09ef2=0x0;for(let _0x5857b2=0x0;_0x5857b2<_0xc29699['height'];_0x5857b2++){for(let _0x45cb24=0x0;_0x45cb24<_0xc29699['width'];_0x45cb24++){const _0x120f9a=_0x46b315[(_0x5857b2*_0xc29699['width']+_0x45cb24)*0x4+0x3];if(_0x120f9a>0x0){_0x4691d1=Math[_0x4f50('0x1e')](_0x4691d1,_0x45cb24);_0x325830=Math['min'](_0x325830,_0x5857b2);_0x1a9e3c=Math['max'](_0x1a9e3c,_0x45cb24);_0xd09ef2=Math[_0x4f50('0x16')](_0xd09ef2,_0x5857b2);}}}if(_0x4691d1>=_0x1a9e3c||_0x325830>=_0xd09ef2){return _0xc29699;}const _0x56ea87=0x14;_0x4691d1=Math[_0x4f50('0x16')](0x0,_0x4691d1-_0x56ea87);_0x325830=Math[_0x4f50('0x16')](0x0,_0x325830-_0x56ea87);_0x1a9e3c=Math['min'](_0xc29699[_0x4f50('0x35')]-0x1,_0x1a9e3c+_0x56ea87);_0xd09ef2=Math[_0x4f50('0x1e')](_0xc29699[_0x4f50('0xa7')]-0x1,_0xd09ef2+_0x56ea87);const _0x8fba43=_0x1a9e3c-_0x4691d1+0x1;const _0x12975c=_0xd09ef2-_0x325830+0x1;const _0x4023a2=document[_0x4f50('0x46')](_0x4f50('0x8a'));_0x4023a2[_0x4f50('0x35')]=_0x8fba43;_0x4023a2[_0x4f50('0xa7')]=_0x12975c;const _0x4a544e=_0x4023a2[_0x4f50('0x33')]('2d');_0x4a544e['drawImage'](_0xc29699,_0x4691d1,_0x325830,_0x8fba43,_0x12975c,0x0,0x0,_0x8fba43,_0x12975c);return _0x4023a2;}function drawCloudText(_0x210012,_0x3e8f09,_0x3a2ac6){_0x210012[_0x4f50('0x92')](0x0,0x0,_0x210012[_0x4f50('0x8a')]['width'],_0x210012[_0x4f50('0x8a')][_0x4f50('0xa7')]);_0x210012[_0x4f50('0x3c')]=_0x3e8f09['fontWeight']+'\x20'+_0x3e8f09['fontSize']*_0x3a2ac6+_0x4f50('0x95')+_0x3e8f09['font']+'\x22';_0x210012[_0x4f50('0x97')]='alphabetic';const _0x436d1e=_0x210012['canvas'][_0x4f50('0x35')]/0x2+offsetX*_0x3a2ac6;const _0xbcfa24=_0x210012['canvas']['height']/0x2+offsetY*_0x3a2ac6;const _0x2418e6=_0x210012[_0x4f50('0x6e')]('M');const _0x4bda1c=_0x2418e6[_0x4f50('0x4e')]+_0x2418e6[_0x4f50('0x15')];const _0x3b203b=_0xbcfa24+_0x4bda1c/0x2-_0x2418e6[_0x4f50('0x15')];const _0x5aba82=_0x3e8f09['text'];const _0x7e0de4=_0x3e8f09['letterSpacing']*_0x3a2ac6;const _0x2ef971=_0x210012[_0x4f50('0x6e')](_0x5aba82)[_0x4f50('0x35')]+(_0x5aba82['length']-0x1)*_0x7e0de4;let _0x10f768=_0x436d1e-_0x2ef971/0x2;_0x210012['lineJoin']='round';_0x210012[_0x4f50('0x87')]='round';if(_0x3e8f09['outlineSize']>_0x3e8f09['whiteSize']){_0x210012['strokeStyle']=_0x3e8f09[_0x4f50('0x8f')];_0x210012['lineWidth']=_0x3e8f09[_0x4f50('0x73')]*_0x3a2ac6;_0x210012[_0x4f50('0xa1')]='source-over';_0x10f768=_0x436d1e-_0x2ef971/0x2;for(let _0x23c07e=0x0;_0x23c07e<_0x5aba82['length'];_0x23c07e++){const _0x27330e=_0x5aba82[_0x23c07e];_0x210012[_0x4f50('0x68')](_0x27330e,_0x10f768,_0x3b203b);_0x10f768+=_0x210012[_0x4f50('0x6e')](_0x27330e)[_0x4f50('0x35')]+_0x7e0de4;}}_0x210012[_0x4f50('0xa1')]=_0x4f50('0x61');_0x210012[_0x4f50('0x69')]=_0x3e8f09[_0x4f50('0x71')]*_0x3a2ac6;_0x10f768=_0x436d1e-_0x2ef971/0x2;for(let _0x1e564b=0x0;_0x1e564b<_0x5aba82['length'];_0x1e564b++){const _0x164e92=_0x5aba82[_0x1e564b];_0x210012[_0x4f50('0x68')](_0x164e92,_0x10f768,_0x3b203b);_0x10f768+=_0x210012['measureText'](_0x164e92)['width']+_0x7e0de4;}_0x210012[_0x4f50('0xa1')]='source-over';_0x210012['strokeStyle']=_0x3e8f09['innerColor'];_0x210012['lineWidth']=_0x3e8f09['whiteSize']*_0x3a2ac6;_0x10f768=_0x436d1e-_0x2ef971/0x2;for(let _0x362b97=0x0;_0x362b97<_0x5aba82[_0x4f50('0x2e')];_0x362b97++){const _0x5389fe=_0x5aba82[_0x362b97];_0x210012[_0x4f50('0x68')](_0x5389fe,_0x10f768,_0x3b203b);_0x10f768+=_0x210012[_0x4f50('0x6e')](_0x5389fe)[_0x4f50('0x35')]+_0x7e0de4;}_0x210012[_0x4f50('0x99')]=_0x3e8f09[_0x4f50('0x31')];_0x10f768=_0x436d1e-_0x2ef971/0x2;for(let _0x91386c=0x0;_0x91386c<_0x5aba82[_0x4f50('0x2e')];_0x91386c++){const _0x2403f1=_0x5aba82[_0x91386c];_0x210012['fillText'](_0x2403f1,_0x10f768,_0x3b203b);_0x10f768+=_0x210012['measureText'](_0x2403f1)['width']+_0x7e0de4;}}function getParams(){const _0x49c1b5=parseInt(document[_0x4f50('0x66')]('whiteSize')[_0x4f50('0x9b')]);const _0x225ad7=parseInt(document['getElementById'](_0x4f50('0x73'))[_0x4f50('0x9b')]);return{'text':document[_0x4f50('0x66')]('textInput')['value'],'font':document['getElementById']('fontSelect')['value'],'fontWeight':document['getElementById'](_0x4f50('0x27'))[_0x4f50('0x9b')],'outlineColor':document['getElementById']('outlineColor')['value'],'innerColor':document['getElementById'](_0x4f50('0x13'))[_0x4f50('0x9b')],'textColor':document['getElementById'](_0x4f50('0x31'))[_0x4f50('0x9b')],'outlineSize':_0x49c1b5+_0x225ad7,'whiteSize':_0x49c1b5,'fontSize':parseInt(document['getElementById']('fontSize')['value']),'letterSpacing':parseInt(document[_0x4f50('0x66')]('letterSpacing')[_0x4f50('0x9b')]),'exportScale':0x2};}function handleFontUpload(){const _0x2f71e3=document['getElementById']('fontFile');_0x2f71e3[_0x4f50('0x1b')]('change',function(_0x387e03){const _0x2ab3aa=_0x387e03['target'][_0x4f50('0x4d')][0x0];if(_0x2ab3aa){const _0x24b163=_0x2ab3aa['name'][_0x4f50('0x96')]('.')[0x0];const _0x591c23=URL['createObjectURL'](_0x2ab3aa);const _0x19b94b=new FontFace(_0x24b163,_0x4f50('0x0')+_0x591c23+')');_0x19b94b[_0x4f50('0x56')]()[_0x4f50('0x52')](function(_0x48be88){document['fonts'][_0x4f50('0x39')](_0x48be88);const _0xa4a932=document[_0x4f50('0x66')]('fontSelect');const _0x11656c=document[_0x4f50('0x46')]('option');_0x11656c['value']=_0x24b163;_0x11656c[_0x4f50('0x79')]=_0x24b163+'\x20(自定义)';_0xa4a932[_0x4f50('0x5e')](_0x11656c);_0xa4a932['value']=_0x24b163;generatePreview();})['catch'](function(_0x4af77d){alert(_0x4f50('0x24')+_0x4af77d[_0x4f50('0x5a')]);});}});}function createCanvas(_0xba4b9b,_0x2bd268){const _0x41c3e2=document['createElement']('canvas');_0x41c3e2[_0x4f50('0x35')]=0x4b0*_0x2bd268;_0x41c3e2[_0x4f50('0xa7')]=0x1f4*_0x2bd268;const _0x1c684b=_0x41c3e2['getContext']('2d');drawCloudText(_0x1c684b,_0xba4b9b,_0x2bd268);return _0x41c3e2;}function saveTextToStorage(_0x3c7371){try{localStorage['setItem']('cloudText_content',_0x3c7371);}catch(_0x36d123){console['warn']('无法保存到本地存储:',_0x36d123);}}function loadTextFromStorage(){try{const _0x56fd5f=localStorage['getItem'](_0x4f50('0x9e'));if(_0x56fd5f!==null){const _0x1d0307=document[_0x4f50('0x66')](_0x4f50('0x4c'));_0x1d0307['value']=_0x56fd5f;}}catch(_0x3f33be){console['warn'](_0x4f50('0x44'),_0x3f33be);}}function saveAllSettingsToStorage(){try{const _0x1ad59c={'fontSelect':document[_0x4f50('0x66')]('fontSelect')[_0x4f50('0x9b')],'fontWeight':document[_0x4f50('0x66')](_0x4f50('0x27'))[_0x4f50('0x9b')],'fontSize':document['getElementById']('fontSize')['value'],'letterSpacing':document['getElementById'](_0x4f50('0x19'))[_0x4f50('0x9b')],'whiteSize':document['getElementById'](_0x4f50('0x71'))['value'],'outlineSize':document['getElementById'](_0x4f50('0x73'))['value'],'textColor':document['getElementById']('textColor')[_0x4f50('0x9b')],'innerColor':document['getElementById'](_0x4f50('0x13'))[_0x4f50('0x9b')],'outlineColor':document['getElementById'](_0x4f50('0x8f'))[_0x4f50('0x9b')]};localStorage['setItem']('cloudText_settings',JSON['stringify'](_0x1ad59c));}catch(_0x1fe8ac){console[_0x4f50('0x6d')]('无法保存设置到本地存储:',_0x1fe8ac);}}function loadAllSettingsFromStorage(){try{const _0x4b65bb=localStorage['getItem'](_0x4f50('0x55'));if(_0x4b65bb!==null){const _0x52dedb=JSON['parse'](_0x4b65bb);if(_0x52dedb[_0x4f50('0xa8')]){const _0x468d67=document['getElementById']('fontSelect');const _0x26004f=_0x468d67[_0x4f50('0x85')]('option[value=\x22'+_0x52dedb[_0x4f50('0xa8')]+'\x22]');if(_0x26004f){_0x468d67['value']=_0x52dedb['fontSelect'];}}if(_0x52dedb[_0x4f50('0x27')])document[_0x4f50('0x66')](_0x4f50('0x27'))['value']=_0x52dedb[_0x4f50('0x27')];if(_0x52dedb[_0x4f50('0x45')])document[_0x4f50('0x66')](_0x4f50('0x45'))['value']=_0x52dedb[_0x4f50('0x45')];if(_0x52dedb['letterSpacing'])document[_0x4f50('0x66')](_0x4f50('0x19'))['value']=_0x52dedb[_0x4f50('0x19')];if(_0x52dedb[_0x4f50('0x71')])document['getElementById'](_0x4f50('0x71'))['value']=_0x52dedb[_0x4f50('0x71')];if(_0x52dedb['outlineSize'])document['getElementById']('outlineSize')[_0x4f50('0x9b')]=_0x52dedb['outlineSize'];if(_0x52dedb['textColor'])document[_0x4f50('0x66')]('textColor')['value']=_0x52dedb[_0x4f50('0x31')];if(_0x52dedb[_0x4f50('0x13')])document['getElementById']('innerColor')['value']=_0x52dedb['innerColor'];if(_0x52dedb['outlineColor'])document['getElementById']('outlineColor')[_0x4f50('0x9b')]=_0x52dedb[_0x4f50('0x8f')];updateRangeDisplays();}}catch(_0x5871ed){console[_0x4f50('0x6d')]('无法从本地存储读取设置:',_0x5871ed);}}function updateRangeDisplays(){const _0x51ab84=[{'id':'fontWeight','valueId':'fontWeightValue'},{'id':'fontSize','valueId':'fontSizeValue'},{'id':_0x4f50('0x19'),'valueId':_0x4f50('0x7d')},{'id':'whiteSize','valueId':'whiteSizeValue'}];_0x51ab84['forEach'](_0x39976a=>{const _0x3ab41b=document[_0x4f50('0x66')](_0x39976a['id']);const _0x22139a=document['getElementById'](_0x39976a['valueId']);if(_0x3ab41b&&_0x22139a){_0x22139a['textContent']=_0x3ab41b[_0x4f50('0x9b')];}});const _0x565d0d=parseInt(document['getElementById']('whiteSize')[_0x4f50('0x9b')]);const _0x4c6069=parseInt(document[_0x4f50('0x66')](_0x4f50('0x73'))[_0x4f50('0x9b')]);const _0x21e210=document[_0x4f50('0x66')](_0x4f50('0x10'));if(_0x21e210){_0x21e210['textContent']=_0x565d0d+_0x4c6069;}}function initCanvasDrag(){previewCanvas['addEventListener'](_0x4f50('0x5'),function(_0x484c14){isDragging=!![];const _0x961d7a=previewCanvas[_0x4f50('0x6c')]();dragStartX=_0x484c14['clientX']-_0x961d7a[_0x4f50('0x89')];dragStartY=_0x484c14[_0x4f50('0x5c')]-_0x961d7a[_0x4f50('0x2a')];previewCanvas[_0x4f50('0x36')][_0x4f50('0x3')]='move';});previewCanvas[_0x4f50('0x1b')]('mousemove',function(_0x1ab877){if(!isDragging){previewCanvas['style'][_0x4f50('0x3')]=_0x4f50('0x60');return;}const _0x15a7ea=previewCanvas[_0x4f50('0x6c')]();const _0x52fc4c=_0x1ab877['clientX']-_0x15a7ea['left'];const _0x2d1ff7=_0x1ab877[_0x4f50('0x5c')]-_0x15a7ea['top'];offsetX+=_0x52fc4c-dragStartX;offsetY+=_0x2d1ff7-dragStartY;dragStartX=_0x52fc4c;dragStartY=_0x2d1ff7;requestAnimationFrame(()=>{generatePreview();});});previewCanvas['addEventListener']('mouseup',function(){isDragging=![];previewCanvas['style']['cursor']=_0x4f50('0x60');});previewCanvas['addEventListener']('mouseleave',function(){isDragging=![];previewCanvas[_0x4f50('0x36')][_0x4f50('0x3')]='move';});previewCanvas[_0x4f50('0x1b')]('touchstart',function(_0x18df97){_0x18df97[_0x4f50('0x93')]();isDragging=!![];const _0x532729=_0x18df97['touches'][0x0];const _0x323d36=previewCanvas['getBoundingClientRect']();lastTouchX=_0x532729['clientX']-_0x323d36['left'];lastTouchY=_0x532729[_0x4f50('0x5c')]-_0x323d36[_0x4f50('0x2a')];});previewCanvas[_0x4f50('0x1b')](_0x4f50('0x43'),function(_0x3e9995){_0x3e9995['preventDefault']();if(!isDragging)return;const _0x6a80cb=_0x3e9995[_0x4f50('0x1f')][0x0];const _0x369ed7=previewCanvas[_0x4f50('0x6c')]();const _0x724184=_0x6a80cb[_0x4f50('0x7c')]-_0x369ed7[_0x4f50('0x89')];const _0x58f5bc=_0x6a80cb[_0x4f50('0x5c')]-_0x369ed7[_0x4f50('0x2a')];offsetX+=_0x724184-lastTouchX;offsetY+=_0x58f5bc-lastTouchY;lastTouchX=_0x724184;lastTouchY=_0x58f5bc;requestAnimationFrame(()=>{generatePreview();});});previewCanvas['addEventListener'](_0x4f50('0x67'),function(_0x2e9d30){_0x2e9d30['preventDefault']();isDragging=![];});previewCanvas[_0x4f50('0x1b')]('dblclick',function(){offsetX=0x0;offsetY=0x0;generatePreview();});previewCanvas[_0x4f50('0x36')][_0x4f50('0x3')]=_0x4f50('0x60');previewCanvas[_0x4f50('0x36')]['userSelect']=_0x4f50('0x8e');}initControls();handleFontUpload();initCanvasDrag();generatePreview();
        </script>
    </body>
</html>