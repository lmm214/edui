<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <title>云朵字生成器</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- 引入本地字体 -->
        <style>
            /* 加载本地字体文件 */
            @font-face {
                font-family: 'ABeeZee-Regular';
                src: url('./fonts/ABeeZee-Regular-2.ttf') format('truetype');
                font-weight: normal;
                font-style: normal;
            }
            
            @font-face {
                font-family: 'ABeeZee-Italic';
                src: url('./fonts/ABeeZee-Italic-3.ttf') format('truetype');
                font-weight: normal;
                font-style: italic;
            }
            
            @font-face {
                font-family: 'XuMin';
                src: url('./fonts/xumin.ttf') format('truetype');
                font-weight: normal;
                font-style: normal;
            }
            
            :root {
                --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                --primary-solid: #667eea;
                --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                --accent: #00d4ff;
                --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                --surface: rgba(255, 255, 255, 0.5);
                --surface-glass: rgba(255, 255, 255, 0.1);
                --text-primary: #1a1a1a;
                --text-secondary: #666;
                --border: rgba(255, 255, 255, 0.2);
                --shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                --shadow-hover: 0 30px 60px rgba(0, 0, 0, 0.15);
                --border-radius: 24px;
                --border-radius-small: 16px;
                --border-radius-large: 28px;
            }
    
            * {
                box-sizing: border-box;
            }
    
            body {
                font-family: 'ABeeZee-Italic', sans-serif;
                background: var(--bg);
                margin: 0;
                padding: 20px;
                min-height: 100vh;
                overflow-x: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
            }
    
            .app-container {
                max-width: 1280px;
                width: 100%;
                background: var(--surface);
                backdrop-filter: blur(20px);
                border: 1px solid var(--border);
                border-radius: var(--border-radius-large);
                box-shadow: var(--shadow-hover);
                overflow: hidden;
                transition: all 0.3s ease;
            }        
    
            .app-content {
                padding: 20px;
            }
    
            .preview-section {
                background: white;
                border-radius: var(--border-radius-small);
                border: 1px solid rgba(0,0,0,0.05);
                grid-column: 1 / -1;
                text-align: center;
            }
            .controls-neiwai-panel{
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 30px;
            }
            .control-group {
                display: grid;
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto auto;
                gap: 0px 30px;
                align-items: start;
                background: rgba(255, 255, 255, 0.9);
                padding: 25px;
                border-radius: var(--border-radius-small);
                margin-bottom: 20px;
                border: 1px solid rgba(0,0,0,0.05);
                transition: all 0.3s ease;
            }
            .control-group.wenzi{grid-template-columns: 1fr 1fr 1fr;gap:0px 90px;}
            .control-group.neiwai{grid-template-columns: 1fr 1fr;gap:0 80px;}
            .control-group.neiwai .control-item{grid-template-columns: 1fr 6fr;}
            .control-group.yanse .control-item{grid-template-columns: 1fr 2fr;}
            .control-group.yanse{grid-template-columns: 1fr 1fr 1fr;gap:0;}
            .controls-panel h2,.controls-panel h3 {
                text-align:center;
                margin: 0 0 10px 0;
                font-size: 1.2rem;
                font-weight: 600;
                color: var(--text-primary);
            }
            .controls-panel.online-fonts h3{margin:3rem auto 1rem;}
            .controls-panel h2{font-size: 1.5rem;}
            .control-item {
                margin-bottom: 10px;
                display: grid;
                grid-template-columns: 1fr 6fr;
                gap: 10px;
                align-items: center;
            }

            .control-item:last-child {
                margin-bottom: 0;
            }

            .control-item label {
                margin-bottom: 0;
            }

            .control-item .range-container,
            .control-item input,
            .control-item select {
                margin: 0;
            }
    
            label {
                display: block;
                font-weight: 500;
                color: var(--text-primary);
                margin-bottom: 8px;
                font-size: 0.95em;
            }
    
            input[type="text"], select {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid rgba(0,0,0,0.1);
                border-radius: var(--border-radius-small);
                font-size: 1rem;
                transition: all 0.3s ease;
                background: white;
            }
    
            input[type="text"]:focus, select:focus {
                outline: none;
                border-color: var(--primary-solid);
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }

            input[type="file"] {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid rgba(0,0,0,0.1);
                border-radius: var(--border-radius-small);
                transition: all 0.3s ease;
                background: white;
                cursor: pointer;
            }
    
            input[type="file"]:focus {
                outline: none;
                border-color: var(--primary-solid);
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }
    
            input[type="file"]:hover {
                border-color: var(--primary-solid);
                box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
            }
    
            input[type="range"] {
                width: 100%;
                height: 6px;
                border-radius: 3px;
                background: rgba(0,0,0,0.1);
                outline: none;
                -webkit-appearance: none;
                margin: 10px 0;
            }
    
            input[type="range"]::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background: var(--primary-solid);
                cursor: pointer;
                box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
                transition: all 0.3s ease;
            }
    
            input[type="range"]::-webkit-slider-thumb:hover {
                transform: scale(1.2);
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            }
    
            input[type="color"] {
                width: 42px;
                height: 32px;
                border: none;
                border-radius: var(--border-radius-small);
                cursor: pointer;
                transition: all 0.3s ease;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                background: none;
                outline: none;
            }
    
            input[type="color"]::-webkit-color-swatch-wrapper {
                padding: 0;
                border: none;
                border-radius: var(--border-radius-small);
            }
    
            input[type="color"]::-webkit-color-swatch {
                border: none;
                border-radius: var(--border-radius-small);
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
    
            input[type="color"]::-moz-color-swatch {
                border: none;
                border-radius: var(--border-radius-small);
            }
    
            input[type="color"]:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            }
    
            input[type="color"]:hover::-webkit-color-swatch {
                box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            }
    
            .range-container {
                display: flex;
                align-items: center;
                gap: 15px;
            }
    
            .range-value {
                min-width: 40px;
                text-align: center;
                font-weight: 600;
                color: var(--primary-solid);
                background: rgba(102, 126, 234, 0.1);
                padding: 6px 12px;
                border-radius: 8px;
                font-size: 0.9em;
            }
    
            .download-section {
                grid-column: 1 / -1;
                text-align: center;
                margin:1rem auto 2rem;
            }
    
            button {
                background: var(--primary);
                color: white;
                border: none;
                padding: 14px 28px;
                border-radius: var(--border-radius-small);
                cursor: pointer;
                font-weight: 600;
                font-size: 1rem;
                transition: all 0.3s ease;
                box-shadow: 0 4px 1px rgba(102, 126, 234, 0.5);
                position: relative;
                overflow: hidden;
            }
    
            button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.5s;
            }
    
            button:hover {
                transform: translateY(-2px);
            }
    
            button:hover::before {
                left: 100%;
            }
    
            button:active {
                transform: translateY(0);
            }
    
            .status-indicator {
                display: flex;
                align-items: center;
                gap: 8px;
                font-weight: 500;
                color: var(--text-secondary);
            }
    
            /* 在线字体相关样式 */
            .online-font-option {
                color: #999 !important;
                font-style: italic;
            }
            
            .online-font-option:disabled {
                color: #ccc !important;
            }
            

            
            .font-load-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                border-color: #ccc;
            }
            
            .font-load-btn.loading {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border-color: #667eea;
                cursor: not-allowed;
            }
            
            .font-load-btn.loaded {
                background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
                color: white;
                border-color: #56ab2f;
            }
            
            .font-load-btn.error {
                background: linear-gradient(135deg, #ff6b6b 0%, #ffa8a8 100%);
                color: white;
                border-color: #ff6b6b;
            }
            
            .font-name {
                font-weight: 600;
                font-size: 0.9rem;
                text-align: center;
                line-height: 1.2;
            }
            
            .load-status {
                font-size: 0.75rem;
                opacity: 0.8;
                text-align: center;
            }
            
            .online-fonts .control-group {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 10px;
                padding: 0;
                background: transparent;
                border: none;
            }
            
            .font-load-btn {
                width: 100%;
                border: 1px solid rgba(0, 0, 0, 0.05);
                border-radius: var(--border-radius-small);
                font-size: 1rem;
                padding: 8px 12px;
                background: rgba(255, 255, 255, 0.9);
                color: #333;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.3s ease;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 2px;
                position: relative;
                overflow: hidden;
                min-height: 60px;
                justify-content: center;
            }

            .status-dot {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: #4CAF50;
                animation: pulse 2s infinite;
            }
    
            @keyframes pulse {
                0% { opacity: 1; }
                50% { opacity: 0.5; }
                100% { opacity: 1; }
            }
    
            @media (max-width: 1200px) {
                .app-content {
                    grid-template-columns: 1fr 1fr;
                    gap: 10px;
                }
            }
            
            @media (max-width: 900px) {
                .app-content {
                    grid-template-columns: 1fr;
                    gap: 10px;
                }
            }
        </style>
    </head>
    
    <body>
        <div class="app-container">            
            <div class="app-content">
                <!-- 控制面板 - 第一行3列 -->
                <div class="controls-panel">
                    <h2>☁️ 云朵字生成器</h2>
                    <div class="control-group wenzi">
                        <div class="control-item">
                            <label>内容</label>
                            <input type="text" id="textInput" value="edui123" placeholder="输入您想要设计的文字...">
                        </div>
                        <div class="control-item">
                            <label>字体</label>
                            <select id="fontSelect">
                                <optgroup label="系统字体">
                                    <option value="ABeeZee-Italic" selected>ABeeZee</option>
                                    <option value="ABeeZee-Regular">ABeeZee（常规）</option>
                                    <option value="XuMin">徐珉体</option>
                                    <option value="Comic Sans MS">Comic Sans MS</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                </optgroup>
                                <optgroup label="在线字体" id="onlineFontsGroup">
                                    <!-- 在线字体选项将通过JavaScript动态生成 -->
                                </optgroup>
                            </select>
                        </div>
                        <div class="control-item">
                            <label>本地</label>
                            <input type="file" id="fontFile" accept=".ttf,.otf,.woff,.woff2">
                        </div>
                        <div class="control-item">
                            <label>字重</label>
                            <div class="range-container">
                                <input type="range" id="fontWeight" min="100" max="900" value="400" step="100">
                                <span class="range-value" id="fontWeightValue">400</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>字号</label>
                            <div class="range-container">
                                <input type="range" id="fontSize" min="150" max="500" value="255">
                                <span class="range-value" id="fontSizeValue">255</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>间距</label>
                            <div class="range-container">
                                <input type="range" id="letterSpacing" min="-30" max="80" value="0">
                                <span class="range-value" id="letterSpacingValue">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="controls-neiwai-panel">
                <div class="controls-panel">
                    <h3>🛞 内外厚度</h3>
                    <div class="control-group neiwai">
                        <div class="control-item">
                            <label>内层</label>
                            <div class="range-container">
                                <input type="range" id="whiteSize" min="5" max="100" value="50" step="5">
                                <span class="range-value" id="whiteSizeValue">50</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>外层</label>
                            <div class="range-container">
                                <input type="range" id="outlineSize" min="5" max="100" value="50" step="5">
                                <span class="range-value" id="outlineSizeValue">50</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>🎨 颜色调整</h3>
                    <div class="control-group yanse">
                        <div class="control-item">
                            <label>文字</label>
                            <input type="color" id="textColor" value="#333333">
                        </div>
                        <div class="control-item">
                            <label>内层</label>
                            <input type="color" id="innerColor" value="#ffffff">
                        </div>
                        <div class="control-item">
                            <label>外层</label>
                            <input type="color" id="outlineColor" value="#ff6b6b">
                        </div>
                    </div>
                </div>
                </div>
                
                <div class="download-section">
                    <button onclick="downloadSingle()">💾 导出高清设计</button>
                </div>
                <!-- 实时预览区域 - 第三行整行 -->
                <div class="preview-section">
                    <canvas id="previewCanvas" width="1200" height="500"></canvas>
                </div>


                <div class="controls-panel online-fonts">
                    <h3>🔗 在线字体</h3>
                    <div class="control-group" id="onlineFontsContainer">
                        <!-- 在线字体按钮将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    
        <script>
const _0xd03c=['loaded','寒蝉正楷体','fontWeight','lineWidth','target','https://fontsapi.zeoseven.com/256/main/result.css','.font-loading-tip','outlineSizeValue','lineCap',',\x20monospace;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','whiteSize','source-over','getElementById','add','resolve','ready','from','textContent','https://fontsapi.zeoseven.com/223/main/result.css','some','valueId','addEventListener','AR\x20PL\x20UKai\x20CN','measureText','value','disabled','forEach','https://fontsapi.zeoseven.com/494/main/result.css','url(','https://fontsapi.zeoseven.com/92/main/result.css','textInput','textColor','font-load-btn','\x20(自定义)','font','length','MaokenZhuyuanTi','https://fontsapi.zeoseven.com/84/main/result.css','setAttribute','file','\x20字体加载失败','测试字体ABCabc','destination-out','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22load-status\x22>点击加载</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','stylesheet','option[value=\x22','px\x20\x22','appendChild','width','全字库正楷体','classList','Zhuque\x20Fangsong\x20(technical\x20preview)','平方公子体','warn','click','name','\x22,\x20monospace','download','无法从本地存储读取设置:','fontFamily','font-loading-tip','className','fontSize','fonts','whiteSizeValue','canvas','https://fontsapi.zeoseven.com/572/main/result.css','dataset','text','字体加载失败:','fontWeightValue','fontStyle','fontSizeValue','family','innerColor','createElement','#000','head','slideIn\x200.3s\x20ease\x20reverse','https://fontsapi.zeoseven.com/285/main/result.css','letterSpacing','offsetWidth','exportScale','removeChild','抖音美好体','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(102,\x20126,\x20234,\x200.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.15);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20slideIn\x200.3s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','body','globalCompositeOperation','has','parse','猫啃珠圆体','change','cloudText_settings','data-font','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20visibility:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2072px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20','querySelector','rel','思源宋体','actualBoundingBoxDescent','input','.load-status','option','toTimeString','onlineFontsGroup','YFFYT','fontSelect','得意黑','strokeStyle','loading','已加载','textBaseline','cssText','remove','replace','outlineSize','now','outlineColor','div','round','正在加载\x20','querySelectorAll','letterSpacingValue','https://fontsapi.zeoseven.com/488/main/result.css','ChillKai','height','style','朱雀仿宋','find','innerHTML'];const _0x44c5=function(_0xd03ceb,_0x44c569){_0xd03ceb=_0xd03ceb-0x0;let _0x2fb0e9=_0xd03c[_0xd03ceb];return _0x2fb0e9;};let currentDesign=null;let batchItems=[];const previewCanvas=document[_0x44c5('0xc')]('previewCanvas');const ctx=previewCanvas['getContext']('2d');const loadedFonts=new Set();const onlineFonts=[{'id':_0x44c5('0x24'),'name':_0x44c5('0x5a'),'cssUrl':'https://fontsapi.zeoseven.com/88/main/result.css'},{'id':'寒蝉半圆体','name':'寒蝉半圆体','cssUrl':'https://fontsapi.zeoseven.com/243/main/result.css'},{'id':'Unifont','name':'像素字体','cssUrl':_0x44c5('0x42')},{'id':'STDongGuanTi','name':'上图东观体','cssUrl':_0x44c5('0x7a')},{'id':'DouyinSans','name':_0x44c5('0x54'),'cssUrl':_0x44c5('0x25')},{'id':'Noto\x20Serif\x20CJK','name':_0x44c5('0x61'),'cssUrl':_0x44c5('0x4f')},{'id':_0x44c5('0x33'),'name':_0x44c5('0x7e'),'cssUrl':'https://fontsapi.zeoseven.com/7/main/result.css'},{'id':'Smiley\x20Sans\x20Oblique','name':_0x44c5('0x6a'),'cssUrl':_0x44c5('0x1d')},{'id':'Huiwen-mincho','name':'汇文明朝体','cssUrl':_0x44c5('0x5')},{'id':_0x44c5('0x7b'),'name':_0x44c5('0x1'),'cssUrl':'https://fontsapi.zeoseven.com/5/main/result.css'},{'id':_0x44c5('0x16'),'name':'文鼎楷体','cssUrl':'https://fontsapi.zeoseven.com/577/main/result.css'},{'id':'TW-Kai','name':_0x44c5('0x31'),'cssUrl':'https://fontsapi.zeoseven.com/36/main/result.css'},{'id':'KingHwa_OldSong','name':'京华老宋体','cssUrl':'https://fontsapi.zeoseven.com/309/main/result.css'},{'id':'huangkaihuaLawyerfont','name':'黄凯桦手写体','cssUrl':_0x44c5('0x12')},{'id':_0x44c5('0x68'),'name':'云峰飞云体','cssUrl':'https://fontsapi.zeoseven.com/446/main/result.css'},{'id':'PING\x20FANG\x20GONG\x20ZI\x20TI','name':_0x44c5('0x34'),'cssUrl':_0x44c5('0x1b')}];function generateOnlineFontsHTML(){const _0x40099d=document[_0x44c5('0xc')](_0x44c5('0x67'));_0x40099d[_0x44c5('0x80')]='';onlineFonts[_0x44c5('0x1a')](_0x4132f7=>{const _0x29d010=document[_0x44c5('0x4b')]('option');_0x29d010['value']=_0x4132f7['id'];_0x29d010[_0x44c5('0x11')]=_0x4132f7['name'];_0x29d010[_0x44c5('0x19')]=!![];_0x29d010['className']='online-font-option';_0x40099d['appendChild'](_0x29d010);});const _0x3fe313=document[_0x44c5('0xc')]('onlineFontsContainer');_0x3fe313['innerHTML']='';onlineFonts['forEach'](_0x5b3303=>{const _0xc01b82=document[_0x44c5('0x4b')]('button');_0xc01b82[_0x44c5('0x3d')]=_0x44c5('0x20');_0xc01b82['setAttribute'](_0x44c5('0x5d'),_0x5b3303['id']);_0xc01b82[_0x44c5('0x26')]('data-name',_0x5b3303['name']);_0xc01b82['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-name\x22>'+_0x5b3303['name']+_0x44c5('0x2b');_0x3fe313[_0x44c5('0x2f')](_0xc01b82);});}function showLoadingTip(_0x4085fd){const _0x25c780=document[_0x44c5('0x5f')]('.font-loading-tip');if(_0x25c780){_0x25c780['remove']();}const _0x40dd1a=document['createElement'](_0x44c5('0x75'));_0x40dd1a['className']=_0x44c5('0x3c');_0x40dd1a[_0x44c5('0x7d')][_0x44c5('0x6f')]=_0x44c5('0x55');_0x40dd1a[_0x44c5('0x11')]=_0x4085fd;document[_0x44c5('0x56')][_0x44c5('0x2f')](_0x40dd1a);if(!document['querySelector']('#loading-tip-style')){const _0x355156=document[_0x44c5('0x4b')]('style');_0x355156['id']='loading-tip-style';_0x355156[_0x44c5('0x11')]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20slideIn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20from\x20{\x20transform:\x20translateX(100%);\x20opacity:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20to\x20{\x20transform:\x20translateX(0);\x20opacity:\x201;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x44c5('0x4d')][_0x44c5('0x2f')](_0x355156);}return _0x40dd1a;}function hideLoadingTip(){const _0x464d92=document['querySelector'](_0x44c5('0x6'));if(_0x464d92){_0x464d92['style']['animation']=_0x44c5('0x4e');setTimeout(()=>_0x464d92['remove'](),0x12c);}}function checkFontAvailable(_0xe57fd7){return new Promise(_0x14e9a4=>{const _0x41fcb1=document[_0x44c5('0x4b')]('span');_0x41fcb1[_0x44c5('0x7d')][_0x44c5('0x6f')]=_0x44c5('0x5e')+_0xe57fd7+_0x44c5('0x9');_0x41fcb1[_0x44c5('0x11')]=_0x44c5('0x29');document[_0x44c5('0x56')][_0x44c5('0x2f')](_0x41fcb1);_0x41fcb1['style'][_0x44c5('0x3b')]='monospace';const _0x13f3b4=_0x41fcb1['offsetWidth'];_0x41fcb1['style'][_0x44c5('0x3b')]='\x22'+_0xe57fd7+_0x44c5('0x38');let _0x3e6b8e=0x0;const _0x467647=0x32;const _0x331200=()=>{const _0x10d727=_0x41fcb1[_0x44c5('0x51')];_0x3e6b8e++;if(_0x10d727!==_0x13f3b4||_0x3e6b8e>=_0x467647){document[_0x44c5('0x56')][_0x44c5('0x53')](_0x41fcb1);_0x14e9a4(_0x10d727!==_0x13f3b4);}else{setTimeout(_0x331200,0x64);}};_0x331200();});}function loadOnlineFont(_0x4aa64f){if(loadedFonts['has'](_0x4aa64f)){return Promise[_0x44c5('0xe')]();}const _0x1b7f53=onlineFonts['find'](_0x3eb501=>_0x3eb501['id']===_0x4aa64f);if(!_0x1b7f53){return Promise['resolve']();}const {cssUrl,name:_0x302aff}=_0x1b7f53;if(cssUrl){const _0x4a6bd1=showLoadingTip(_0x44c5('0x77')+_0x302aff+'\x20字体...');const _0x588d9a=Date[_0x44c5('0x73')]();return new Promise((_0xca2ad8,_0x4eef6e)=>{const _0x1acf24=document[_0x44c5('0x4b')]('link');_0x1acf24[_0x44c5('0x60')]=_0x44c5('0x2c');_0x1acf24['href']=cssUrl;const _0x484e65=setTimeout(()=>{hideLoadingTip();showLoadingTip(_0x302aff+'\x20字体加载超时');setTimeout(hideLoadingTip,0x7d0);_0x4eef6e(new Error('字体加载超时'));},0x2710);_0x1acf24['onload']=()=>{clearTimeout(_0x484e65);checkFontAvailable(_0x4aa64f)['then'](_0x392b80=>{const _0x2dc3a1=Date['now']()-_0x588d9a;const _0x1a599=0x1388;const _0xa9fdb3=Math['max'](0x0,_0x1a599-_0x2dc3a1);setTimeout(()=>{hideLoadingTip();if(_0x392b80){loadedFonts[_0x44c5('0xd')](_0x4aa64f);showLoadingTip(_0x302aff+'\x20字体加载成功！');setTimeout(hideLoadingTip,0x7d0);_0xca2ad8();}else{showLoadingTip(_0x302aff+_0x44c5('0x28'));setTimeout(hideLoadingTip,0xbb8);_0x4eef6e(new Error('字体不可用'));}},_0xa9fdb3);});};_0x1acf24['onerror']=()=>{clearTimeout(_0x484e65);hideLoadingTip();showLoadingTip(_0x302aff+'\x20字体加载失败');setTimeout(hideLoadingTip,0xbb8);_0x4eef6e(new Error('CSS加载失败'));};document['head']['appendChild'](_0x1acf24);});}return Promise['resolve']();}function initControls(){loadTextFromStorage();loadAllSettingsFromStorage();generateOnlineFontsHTML();const _0x19f75d=document[_0x44c5('0xc')](_0x44c5('0x69'));let _0x5f4ef7=_0x19f75d['value'];_0x19f75d[_0x44c5('0x15')](_0x44c5('0x5b'),function(){generatePreview();_0x5f4ef7=this['value'];});_0x19f75d[_0x44c5('0x15')](_0x44c5('0x36'),function(){if(this['value']===_0x5f4ef7&&this[_0x44c5('0x18')]){const _0x2aedd1=onlineFonts[_0x44c5('0x13')](_0x40199d=>_0x40199d['family']===this['value']);if(_0x2aedd1&&loadedFonts[_0x44c5('0x58')](this[_0x44c5('0x18')])){document['fonts'][_0x44c5('0xf')]['then'](()=>{setTimeout(()=>{generatePreview();},0x32);});}else if(!_0x2aedd1){generatePreview();}}});document[_0x44c5('0x78')]('.font-load-btn')[_0x44c5('0x1a')](_0x2421c1=>{_0x2421c1['addEventListener']('click',function(){const _0x429e77=this[_0x44c5('0x43')]['font'];const _0xf735e5=this['dataset'][_0x44c5('0x37')];if(loadedFonts['has'](_0x429e77)){document[_0x44c5('0xc')]('fontSelect')['value']=_0x429e77;document[_0x44c5('0x3f')]['ready']['then'](()=>{setTimeout(()=>{generatePreview();},0x64);});return;}this['classList'][_0x44c5('0xd')](_0x44c5('0x6c'));this[_0x44c5('0x5f')](_0x44c5('0x64'))['textContent']='加载中...';this[_0x44c5('0x19')]=!![];loadOnlineFont(_0x429e77)['then'](()=>{this[_0x44c5('0x32')][_0x44c5('0x70')]('loading');this['classList']['add'](_0x44c5('0x0'));this['querySelector'](_0x44c5('0x64'))[_0x44c5('0x11')]=_0x44c5('0x6d');this['disabled']=![];const _0x118a2f=document['querySelector'](_0x44c5('0x2d')+_0x429e77+'\x22]');if(_0x118a2f){_0x118a2f['disabled']=![];_0x118a2f[_0x44c5('0x7d')]['color']=_0x44c5('0x4c');_0x118a2f[_0x44c5('0x7d')][_0x44c5('0x47')]='normal';}})['catch'](_0x21337d=>{console['error'](_0x44c5('0x45'),_0x21337d);this[_0x44c5('0x32')]['remove'](_0x44c5('0x6c'));this[_0x44c5('0x32')][_0x44c5('0xd')]('error');this[_0x44c5('0x5f')](_0x44c5('0x64'))['textContent']='加载失败';this[_0x44c5('0x19')]=![];setTimeout(()=>{this['classList'][_0x44c5('0x70')]('error');this['querySelector']('.load-status')[_0x44c5('0x11')]='点击加载';},0xbb8);});});});document['querySelectorAll'](_0x44c5('0x63'))['forEach'](_0x1ce7e6=>{_0x1ce7e6[_0x44c5('0x15')]('input',function(){generatePreview();if(this['id']===_0x44c5('0x1e')){saveTextToStorage(this[_0x44c5('0x18')]);}if(this['type']!==_0x44c5('0x27')){saveAllSettingsToStorage();}});});document[_0x44c5('0x78')]('select')[_0x44c5('0x1a')](_0x4f748d=>{_0x4f748d['addEventListener'](_0x44c5('0x5b'),function(){generatePreview();saveAllSettingsToStorage();});});linkRangeValue(_0x44c5('0x72'),'outlineSizeValue');linkRangeValue('whiteSize',_0x44c5('0x40'));linkRangeValue(_0x44c5('0x3e'),_0x44c5('0x48'));linkRangeValue('letterSpacing',_0x44c5('0x79'));linkRangeValue(_0x44c5('0x2'),_0x44c5('0x46'));}function linkRangeValue(_0x355256,_0x4a622b){const _0xa92fe4=document['getElementById'](_0x355256);const _0x56decc=document[_0x44c5('0xc')](_0x4a622b);_0xa92fe4['addEventListener']('input',()=>{if(_0x355256===_0x44c5('0x72')){const _0x51c487=parseInt(document['getElementById']('whiteSize')[_0x44c5('0x18')]);const _0x26c836=parseInt(_0xa92fe4['value']);_0x56decc['textContent']=_0x51c487+_0x26c836;}else{_0x56decc['textContent']=_0xa92fe4['value'];}});if(_0x355256==='whiteSize'){_0xa92fe4[_0x44c5('0x15')]('input',()=>{const _0x29b6ef=document['getElementById']('outlineSizeValue');const _0x1bbe4c=parseInt(document[_0x44c5('0xc')]('outlineSize')['value']);const _0x1a5f41=parseInt(_0xa92fe4[_0x44c5('0x18')]);_0x29b6ef[_0x44c5('0x11')]=_0x1a5f41+_0x1bbe4c;});}}function generatePreview(){const _0x3490cd=getParams();const _0x3be07c=['ABeeZee-Regular','ABeeZee-Italic','XuMin']['includes'](_0x3490cd[_0x44c5('0x22')]);if(_0x3be07c){document['fonts'][_0x44c5('0xf')]['then'](()=>{const _0x66e3f8=Array[_0x44c5('0x10')](document[_0x44c5('0x3f')])[_0x44c5('0x7f')](_0x1130bb=>_0x1130bb['family']===_0x3490cd['font']||_0x1130bb[_0x44c5('0x49')]==='\x22'+_0x3490cd[_0x44c5('0x22')]+'\x22');if(_0x66e3f8&&_0x66e3f8['status']===_0x44c5('0x0')){drawCloudText(ctx,_0x3490cd,0x1);}else{setTimeout(()=>{drawCloudText(ctx,_0x3490cd,0x1);},0x320);}});}else{const _0x4b3f2f=onlineFonts[_0x44c5('0x7f')](_0x13e61f=>_0x13e61f['id']===_0x3490cd[_0x44c5('0x22')]);if(_0x4b3f2f&&loadedFonts[_0x44c5('0x58')](_0x3490cd[_0x44c5('0x22')])){document[_0x44c5('0x3f')][_0x44c5('0xf')]['then'](()=>{setTimeout(()=>{drawCloudText(ctx,_0x3490cd,0x1);},0x320);});}else{drawCloudText(ctx,_0x3490cd,0x1);}}currentDesign=_0x3490cd;}function downloadSingle(){if(!currentDesign)return;const _0x58f54c=createCanvas(currentDesign,currentDesign[_0x44c5('0x52')]);const _0x5e4525=document['createElement']('a');const _0x4d10b4=new Date();const _0x2ba31b=_0x4d10b4[_0x44c5('0x66')]()['slice'](0x0,0x8)[_0x44c5('0x71')](/:/g,'');_0x5e4525[_0x44c5('0x39')]=currentDesign[_0x44c5('0x44')]+'-'+_0x2ba31b+'.png';_0x5e4525['href']=_0x58f54c['toDataURL']('image/png');_0x5e4525['click']();}function drawCloudText(_0x3b2516,_0x511b86,_0x299c1e){_0x3b2516['clearRect'](0x0,0x0,_0x3b2516['canvas']['width'],_0x3b2516[_0x44c5('0x41')][_0x44c5('0x7c')]);_0x3b2516['font']=_0x511b86[_0x44c5('0x2')]+'\x20'+_0x511b86['fontSize']*_0x299c1e+_0x44c5('0x2e')+_0x511b86['font']+'\x22';_0x3b2516[_0x44c5('0x6e')]='alphabetic';const _0x19ea74=_0x3b2516['canvas']['width']/0x2;const _0x165142=_0x3b2516[_0x44c5('0x41')]['height']/0x2;const _0x3aa070=_0x3b2516['measureText']('M');const _0x377dfc=_0x3aa070['actualBoundingBoxAscent']+_0x3aa070[_0x44c5('0x62')];const _0x2adc89=_0x165142+_0x377dfc/0x2-_0x3aa070['actualBoundingBoxDescent'];const _0x30463d=_0x511b86['text'];const _0x3537a8=_0x511b86[_0x44c5('0x50')]*_0x299c1e;const _0xb72f69=_0x3b2516[_0x44c5('0x17')](_0x30463d)['width']+(_0x30463d[_0x44c5('0x23')]-0x1)*_0x3537a8;let _0x301299=_0x19ea74-_0xb72f69/0x2;_0x3b2516['lineJoin']=_0x44c5('0x76');_0x3b2516[_0x44c5('0x8')]=_0x44c5('0x76');if(_0x511b86['outlineSize']>_0x511b86[_0x44c5('0xa')]){_0x3b2516['strokeStyle']=_0x511b86[_0x44c5('0x74')];_0x3b2516[_0x44c5('0x3')]=_0x511b86[_0x44c5('0x72')]*_0x299c1e;_0x3b2516['globalCompositeOperation']=_0x44c5('0xb');_0x301299=_0x19ea74-_0xb72f69/0x2;for(let _0x113ae5=0x0;_0x113ae5<_0x30463d['length'];_0x113ae5++){const _0x2587e0=_0x30463d[_0x113ae5];_0x3b2516['strokeText'](_0x2587e0,_0x301299,_0x2adc89);_0x301299+=_0x3b2516['measureText'](_0x2587e0)['width']+_0x3537a8;}}_0x3b2516[_0x44c5('0x57')]=_0x44c5('0x2a');_0x3b2516[_0x44c5('0x3')]=_0x511b86[_0x44c5('0xa')]*_0x299c1e;_0x301299=_0x19ea74-_0xb72f69/0x2;for(let _0x3ef931=0x0;_0x3ef931<_0x30463d[_0x44c5('0x23')];_0x3ef931++){const _0x35355d=_0x30463d[_0x3ef931];_0x3b2516['strokeText'](_0x35355d,_0x301299,_0x2adc89);_0x301299+=_0x3b2516[_0x44c5('0x17')](_0x35355d)['width']+_0x3537a8;}_0x3b2516['globalCompositeOperation']=_0x44c5('0xb');_0x3b2516[_0x44c5('0x6b')]=_0x511b86['innerColor'];_0x3b2516['lineWidth']=_0x511b86[_0x44c5('0xa')]*_0x299c1e;_0x301299=_0x19ea74-_0xb72f69/0x2;for(let _0x5e1d5b=0x0;_0x5e1d5b<_0x30463d['length'];_0x5e1d5b++){const _0x1aaf75=_0x30463d[_0x5e1d5b];_0x3b2516['strokeText'](_0x1aaf75,_0x301299,_0x2adc89);_0x301299+=_0x3b2516['measureText'](_0x1aaf75)['width']+_0x3537a8;}_0x3b2516['fillStyle']=_0x511b86['textColor'];_0x301299=_0x19ea74-_0xb72f69/0x2;for(let _0x6f46cc=0x0;_0x6f46cc<_0x30463d[_0x44c5('0x23')];_0x6f46cc++){const _0x363c02=_0x30463d[_0x6f46cc];_0x3b2516['fillText'](_0x363c02,_0x301299,_0x2adc89);_0x301299+=_0x3b2516['measureText'](_0x363c02)[_0x44c5('0x30')]+_0x3537a8;}}function getParams(){const _0x56cedf=parseInt(document['getElementById']('whiteSize')['value']);const _0x362fbc=parseInt(document[_0x44c5('0xc')]('outlineSize')[_0x44c5('0x18')]);return{'text':document[_0x44c5('0xc')](_0x44c5('0x1e'))['value'],'font':document[_0x44c5('0xc')](_0x44c5('0x69'))[_0x44c5('0x18')],'fontWeight':document['getElementById']('fontWeight')[_0x44c5('0x18')],'outlineColor':document[_0x44c5('0xc')]('outlineColor')['value'],'innerColor':document[_0x44c5('0xc')](_0x44c5('0x4a'))[_0x44c5('0x18')],'textColor':document['getElementById'](_0x44c5('0x1f'))[_0x44c5('0x18')],'outlineSize':_0x56cedf+_0x362fbc,'whiteSize':_0x56cedf,'fontSize':parseInt(document['getElementById']('fontSize')['value']),'letterSpacing':parseInt(document['getElementById']('letterSpacing')[_0x44c5('0x18')]),'exportScale':0x2};}function handleFontUpload(){const _0x3a1fe3=document[_0x44c5('0xc')]('fontFile');_0x3a1fe3[_0x44c5('0x15')](_0x44c5('0x5b'),function(_0x369b94){const _0x2b41a3=_0x369b94[_0x44c5('0x4')]['files'][0x0];if(_0x2b41a3){const _0x55a8c8=_0x2b41a3[_0x44c5('0x37')]['split']('.')[0x0];const _0x3e0b0c=URL['createObjectURL'](_0x2b41a3);const _0x374253=new FontFace(_0x55a8c8,_0x44c5('0x1c')+_0x3e0b0c+')');_0x374253['load']()['then'](function(_0x22091d){document['fonts'][_0x44c5('0xd')](_0x22091d);const _0x42e5ba=document[_0x44c5('0xc')](_0x44c5('0x69'));const _0x398aea=document[_0x44c5('0x4b')](_0x44c5('0x65'));_0x398aea[_0x44c5('0x18')]=_0x55a8c8;_0x398aea['textContent']=_0x55a8c8+_0x44c5('0x21');_0x42e5ba['appendChild'](_0x398aea);_0x42e5ba['value']=_0x55a8c8;generatePreview();})['catch'](function(_0x5b39c3){alert('字体加载失败:\x20'+_0x5b39c3['message']);});}});}function createCanvas(_0x50c118,_0x571be2){const _0x24f037=document[_0x44c5('0x4b')]('canvas');_0x24f037['width']=0x4b0*_0x571be2;_0x24f037['height']=0x1f4*_0x571be2;const _0x327f01=_0x24f037['getContext']('2d');drawCloudText(_0x327f01,_0x50c118,_0x571be2);return _0x24f037;}function saveTextToStorage(_0x77f334){try{localStorage['setItem']('cloudText_content',_0x77f334);}catch(_0x2d265b){console[_0x44c5('0x35')]('无法保存到本地存储:',_0x2d265b);}}function loadTextFromStorage(){try{const _0x5b9940=localStorage['getItem']('cloudText_content');if(_0x5b9940!==null){const _0x44db7b=document[_0x44c5('0xc')](_0x44c5('0x1e'));_0x44db7b[_0x44c5('0x18')]=_0x5b9940;}}catch(_0x1ccf78){console['warn']('无法从本地存储读取:',_0x1ccf78);}}function saveAllSettingsToStorage(){try{const _0x4359ba={'fontSelect':document['getElementById']('fontSelect')['value'],'fontWeight':document[_0x44c5('0xc')](_0x44c5('0x2'))[_0x44c5('0x18')],'fontSize':document['getElementById'](_0x44c5('0x3e'))['value'],'letterSpacing':document[_0x44c5('0xc')]('letterSpacing')['value'],'whiteSize':document[_0x44c5('0xc')](_0x44c5('0xa'))[_0x44c5('0x18')],'outlineSize':document['getElementById']('outlineSize')[_0x44c5('0x18')],'textColor':document['getElementById'](_0x44c5('0x1f'))[_0x44c5('0x18')],'innerColor':document['getElementById'](_0x44c5('0x4a'))['value'],'outlineColor':document['getElementById'](_0x44c5('0x74'))['value']};localStorage['setItem'](_0x44c5('0x5c'),JSON['stringify'](_0x4359ba));}catch(_0x4e9a40){console[_0x44c5('0x35')]('无法保存设置到本地存储:',_0x4e9a40);}}function loadAllSettingsFromStorage(){try{const _0x3ed67d=localStorage['getItem'](_0x44c5('0x5c'));if(_0x3ed67d!==null){const _0x3b6d97=JSON[_0x44c5('0x59')](_0x3ed67d);if(_0x3b6d97[_0x44c5('0x69')]){const _0x20da5c=document[_0x44c5('0xc')](_0x44c5('0x69'));const _0x28aebc=_0x20da5c['querySelector']('option[value=\x22'+_0x3b6d97[_0x44c5('0x69')]+'\x22]');if(_0x28aebc){_0x20da5c['value']=_0x3b6d97[_0x44c5('0x69')];}}if(_0x3b6d97[_0x44c5('0x2')])document['getElementById']('fontWeight')['value']=_0x3b6d97[_0x44c5('0x2')];if(_0x3b6d97['fontSize'])document['getElementById']('fontSize')['value']=_0x3b6d97['fontSize'];if(_0x3b6d97['letterSpacing'])document['getElementById']('letterSpacing')['value']=_0x3b6d97['letterSpacing'];if(_0x3b6d97[_0x44c5('0xa')])document['getElementById'](_0x44c5('0xa'))[_0x44c5('0x18')]=_0x3b6d97[_0x44c5('0xa')];if(_0x3b6d97[_0x44c5('0x72')])document[_0x44c5('0xc')]('outlineSize')[_0x44c5('0x18')]=_0x3b6d97[_0x44c5('0x72')];if(_0x3b6d97['textColor'])document[_0x44c5('0xc')]('textColor')[_0x44c5('0x18')]=_0x3b6d97['textColor'];if(_0x3b6d97['innerColor'])document['getElementById']('innerColor')[_0x44c5('0x18')]=_0x3b6d97[_0x44c5('0x4a')];if(_0x3b6d97[_0x44c5('0x74')])document['getElementById'](_0x44c5('0x74'))[_0x44c5('0x18')]=_0x3b6d97[_0x44c5('0x74')];updateRangeDisplays();}}catch(_0x29f052){console[_0x44c5('0x35')](_0x44c5('0x3a'),_0x29f052);}}function updateRangeDisplays(){const _0xa62ad3=[{'id':_0x44c5('0x2'),'valueId':'fontWeightValue'},{'id':'fontSize','valueId':_0x44c5('0x48')},{'id':_0x44c5('0x50'),'valueId':_0x44c5('0x79')},{'id':'whiteSize','valueId':'whiteSizeValue'}];_0xa62ad3['forEach'](_0xa802e0=>{const _0x47a8fb=document[_0x44c5('0xc')](_0xa802e0['id']);const _0x3f4f34=document['getElementById'](_0xa802e0[_0x44c5('0x14')]);if(_0x47a8fb&&_0x3f4f34){_0x3f4f34['textContent']=_0x47a8fb[_0x44c5('0x18')];}});const _0x2202e2=parseInt(document[_0x44c5('0xc')](_0x44c5('0xa'))['value']);const _0x90d1c4=parseInt(document['getElementById'](_0x44c5('0x72'))[_0x44c5('0x18')]);const _0xead645=document[_0x44c5('0xc')](_0x44c5('0x7'));if(_0xead645){_0xead645[_0x44c5('0x11')]=_0x2202e2+_0x90d1c4;}}initControls();handleFontUpload();generatePreview();
        </script>
    </body>
</html>