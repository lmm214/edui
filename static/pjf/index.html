<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>圈分橘子</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #E6F3FF, #F0FFF0);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
        }

        #gameCanvas {
            display: block;
            cursor: grab;
            background: linear-gradient(135deg, #E6F3FF, #F0FFF0);
        }

        #gameCanvas:active {
            cursor: grabbing;
        }

        #gameCanvas.select-mode {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23333" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>') 12 12, crosshair;
        }

        #gameCanvas.select-mode:active {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23333" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>') 12 12, crosshair;
        }

        /* 圈选完成后的拖拽状态 */
        #gameCanvas.select-mode.dragging-selection {
            cursor: pointer !important;
        }

        .title {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            color: #333;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.8);
            white-space: nowrap;
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-size: 18px;
        }

        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .mode-button {
            padding: 6px 12px;
            border: none;
            border-radius: 12px;
            background: #4CAF50;
            color: white;
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .mode-button:hover {
            background: #45a049;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .mode-button.active {
            background: #FF6B35;
        }

        .mode-button.active:hover {
            background: #e55a2b;
        }

        .instruction {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 28px;
            text-align: center;
            background: rgba(0,0,0,0.4);
            padding: 6px 12px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.3);
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 20px;
                top: -40px;
            }
            
            .controls {
                top: 5px;
                right: 5px;
            }
            
            .mode-button {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .instruction {
                font-size: 16px;
                padding: 10px 20px;
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="controls">
            <button id="toggleMode" class="mode-button">圈分</button>
            <button id="resetBtn" class="mode-button" style="display: none;">重分</button>
        </div>
        <canvas id="gameCanvas" width="1000" height="600"></canvas>
        <div class="loading" id="loading">加载中...</div>
        <div class="instruction" id="instruction">拖动橘子放到盘子里</div>
    </div>

    <script>
const _0x59d8=['onload','getCanvasCoordinates','isSelectMode','clientX','exitSelectMode','rgba(76,\x20175,\x2080,\x200.1)','globalAlpha','ctx','handleTouchEnd','rgba(255,\x20107,\x2053,\x200.1)','exitSelectModeAndShowReset','keys','plateHeight','isDragging','createElement','toggleModeBtn','indexOf','length','moveTo','closePath','orange','fill','highlight','startGame','addEventListeners','filter','sin','classList','delete','plateId','save','updateAnimations','dragOrange','orangeSize','random','images','handleStart','block','map','oranges','max','none','handleEnd','clearRect','plateWidth','每份再各放1个，又分掉6个。','textContent','getSelectionCenter','请圈选6个橘子','high','createPlaceholderImage','textAlign','returnOrangeToRandomPosition','resetGame','toggleMode','isPointInPolygon','最后每份再各放1个，正好分完。','active','#228B22','selectionPath','restore','changedTouches','resetBtn','setupCanvas','clientY','height','activeTouches','round','plate','isPointInOrange','add','stroke','autoDistributeToPlates','getElementById','originalPositions','distributionCount','imagesLoaded','plates','remove','includes','instruction','preventDefault','handleTouchStart','left','isOrangeInSelectionPath','brightness(1.2)','getContext','arrangeOrangesOnPlate','selectedOranges','scale','gameLoop','#FF6B35','touchmove','splice','isPointInPlate','loading','finalizeSelection','handleMove','cos','ghostOranges','addEventListener','style','addModeListeners','imageSmoothingEnabled','center','hoveredPlate','onerror','click','targetScale','selectionDragOffset','pow','getPlateAt','onPlate','slice','width','canvas','isDraggingSelection','ceil','select-mode','createOrangesWithoutOverlap','checkAllOrangesDistributed','handleTouchMove','some','beginPath','translate','isSelecting','fillStyle','imageSmoothingQuality','get','clearSelection','display','touchstart','push','forEach','createGameObjects','totalImages'];const _0x4bbf=function(_0x59d8cd,_0x4bbf57){_0x59d8cd=_0x59d8cd-0x0;let _0x357fc2=_0x59d8[_0x59d8cd];return _0x357fc2;};class CanvasDragGame{constructor(){this['canvas']=document['getElementById']('gameCanvas');this['ctx']=this['canvas']['getContext']('2d');this[_0x4bbf('0x5f')]=document['getElementById']('loading');this[_0x4bbf('0x50')]=document[_0x4bbf('0x49')]('instruction');this['toggleModeBtn']=document['getElementById'](_0x4bbf('0x36'));this['resetBtn']=document['getElementById'](_0x4bbf('0x3e'));this[_0x4bbf('0x27')]=[];this[_0x4bbf('0x4d')]=[];this['images']={};this[_0x4bbf('0x4c')]=0x0;this[_0x4bbf('0x87')]=0x2;this['isDragging']=![];this['dragOrange']=null;this['dragOffset']={'x':0x0,'y':0x0};this['hoveredPlate']=null;this[_0x4bbf('0x42')]=new Map();this['isSelectMode']=![];this['isSelecting']=![];this['selectionPath']=[];this['selectedOranges']=[];this['isDraggingSelection']=![];this['selectionDragOffset']={'x':0x0,'y':0x0};this[_0x4bbf('0x63')]=[];this[_0x4bbf('0x4b')]=0x0;this[_0x4bbf('0x21')]=0x3c;this['plateWidth']=0x78;this[_0x4bbf('0xc')]=0x3a;this['plateY']=this['canvas']['height']-0xa0;this['init']();}['init'](){this[_0x4bbf('0x3f')]();this['loadImages']();}[_0x4bbf('0x3f')](){const _0x3bb56c=this[_0x4bbf('0x73')]['getBoundingClientRect']();this['canvas']['width']=_0x3bb56c[_0x4bbf('0x72')];this['canvas'][_0x4bbf('0x41')]=_0x3bb56c[_0x4bbf('0x41')];this['plateY']=this['canvas']['height']-0xa0;}['loadImages'](){const _0x2a5ffe={'orange':'juzi.png','plate':'panzi.png'};Object[_0x4bbf('0xb')](_0x2a5ffe)['forEach'](_0x1c4d3f=>{const _0x32433c=new Image();_0x32433c[_0x4bbf('0x0')]=()=>{this[_0x4bbf('0x23')][_0x1c4d3f]=_0x32433c;this['imagesLoaded']++;if(this['imagesLoaded']===this['totalImages']){this[_0x4bbf('0x17')]();}};_0x32433c[_0x4bbf('0x6a')]=()=>{this['images'][_0x1c4d3f]=this[_0x4bbf('0x32')](_0x1c4d3f);this['imagesLoaded']++;if(this[_0x4bbf('0x4c')]===this[_0x4bbf('0x87')]){this['startGame']();}};_0x32433c['src']=_0x2a5ffe[_0x1c4d3f];});}['createPlaceholderImage'](_0x209809){const _0x13e38a=document[_0x4bbf('0xe')]('canvas');const _0x14cdb6=_0x13e38a[_0x4bbf('0x56')]('2d');if(_0x209809==='orange'){_0x13e38a['width']=_0x13e38a[_0x4bbf('0x41')]=0x3c;_0x14cdb6[_0x4bbf('0x7e')]=_0x4bbf('0x5b');_0x14cdb6['beginPath']();_0x14cdb6['arc'](0x1e,0x1e,0x19,0x0,Math['PI']*0x2);_0x14cdb6['fill']();_0x14cdb6['fillStyle']=_0x4bbf('0x3a');_0x14cdb6['fillRect'](0x19,0x5,0xa,0xf);}else if(_0x209809===_0x4bbf('0x44')){_0x13e38a[_0x4bbf('0x72')]=0x78;_0x13e38a[_0x4bbf('0x41')]=0x3a;_0x14cdb6[_0x4bbf('0x7e')]='#E0E0E0';_0x14cdb6[_0x4bbf('0x7b')]();_0x14cdb6['ellipse'](0x3c,0x28,0x37,0x23,0x0,0x0,Math['PI']*0x2);_0x14cdb6[_0x4bbf('0x15')]();}return _0x13e38a;}[_0x4bbf('0x17')](){this['loading'][_0x4bbf('0x65')][_0x4bbf('0x82')]=_0x4bbf('0x29');this[_0x4bbf('0x86')]();this[_0x4bbf('0x18')]();this[_0x4bbf('0x66')]();this[_0x4bbf('0x5a')]();}['createGameObjects'](){this[_0x4bbf('0x77')]();const _0x14166c=(this[_0x4bbf('0x73')]['width']-0x6*this[_0x4bbf('0x2c')])/0x7;for(let _0x24c45b=0x0;_0x24c45b<0x6;_0x24c45b++){this[_0x4bbf('0x4d')]['push']({'id':_0x24c45b,'x':_0x14166c+_0x24c45b*(this['plateWidth']+_0x14166c),'y':this['plateY'],'width':this['plateWidth'],'height':this['plateHeight'],'oranges':[],'highlight':![],'scale':0x1,'targetScale':0x1});}}[_0x4bbf('0xa')](){this[_0x4bbf('0x2')]=![];this['canvas'][_0x4bbf('0x1b')]['remove']('select-mode');this['clearSelection']();this[_0x4bbf('0xf')]['style'][_0x4bbf('0x82')]=_0x4bbf('0x29');this['resetBtn'][_0x4bbf('0x65')]['display']='inline-block';}[_0x4bbf('0x35')](){this[_0x4bbf('0x4b')]=0x0;this[_0x4bbf('0x2')]=![];this[_0x4bbf('0x73')][_0x4bbf('0x1b')][_0x4bbf('0x4e')]('select-mode');this['clearSelection']();this[_0x4bbf('0x4d')]['forEach'](_0x2f7f9b=>{_0x2f7f9b[_0x4bbf('0x27')]=[];_0x2f7f9b['highlight']=![];_0x2f7f9b['targetScale']=0x1;});this['oranges']=[];this[_0x4bbf('0x77')]();this[_0x4bbf('0xf')]['style']['display']='inline-block';this['toggleModeBtn']['textContent']='圈分';this[_0x4bbf('0xf')]['classList'][_0x4bbf('0x4e')]('active');this[_0x4bbf('0x3e')]['style']['display']='none';this['instruction']['textContent']='拖动橘子放到盘子里';}['createOrangesWithoutOverlap'](){const _0x260aaf=0x3e8;const _0x1e95b6=this['orangeSize'];const _0x486604=this[_0x4bbf('0x73')]['height']-0xc8;const _0x48ba0a=0xa;const _0x520c6c=this[_0x4bbf('0x73')][_0x4bbf('0x72')]*0.6;const _0x3c375e=_0x486604*0.6;const _0x14bac3=(this[_0x4bbf('0x73')]['width']-_0x520c6c)/0x2;const _0x52b394=(_0x486604-_0x3c375e)/0x2;for(let _0x2a9848=0x0;_0x2a9848<0x12;_0x2a9848++){let _0x1e7ce3=0x0;let _0x1f5a1c=![];let _0xfb54c2;while(!_0x1f5a1c&&_0x1e7ce3<_0x260aaf){const _0x182165=_0x14bac3+_0x520c6c-this['orangeSize'];const _0x4b0c71=_0x52b394+_0x3c375e-this[_0x4bbf('0x21')];const _0x27ba1c=Math[_0x4bbf('0x22')]()*(_0x182165-_0x14bac3)+_0x14bac3;const _0x591e97=Math['random']()*(_0x4b0c71-_0x52b394)+_0x52b394;_0xfb54c2={'id':_0x2a9848,'x':_0x27ba1c,'y':_0x591e97,'width':this['orangeSize'],'height':this[_0x4bbf('0x21')],'onPlate':![],'plateId':null,'scale':0x1,'targetScale':0x1};_0x1f5a1c=!![];for(let _0x5e2c78=0x0;_0x5e2c78<this['oranges'][_0x4bbf('0x11')];_0x5e2c78++){const _0x4a7bc5=this['oranges'][_0x5e2c78];const _0x105dda=Math['sqrt'](Math[_0x4bbf('0x6e')](_0xfb54c2['x']+_0xfb54c2['width']/0x2-_0x4a7bc5['x']-_0x4a7bc5[_0x4bbf('0x72')]/0x2,0x2)+Math['pow'](_0xfb54c2['y']+_0xfb54c2[_0x4bbf('0x41')]/0x2-_0x4a7bc5['y']-_0x4a7bc5[_0x4bbf('0x41')]/0x2,0x2));if(_0x105dda<_0x1e95b6){_0x1f5a1c=![];break;}}_0x1e7ce3++;}if(!_0x1f5a1c){const _0x4abd6c=Math[_0x4bbf('0x75')](Math['sqrt'](0x12));const _0x52a840=Math['ceil'](0x12/_0x4abd6c);const _0x56ad50=_0x520c6c/_0x4abd6c;const _0x3a162f=_0x3c375e/_0x52a840;const _0x3f226d=_0x2a9848%_0x4abd6c;const _0x4fb662=Math['floor'](_0x2a9848/_0x4abd6c);_0xfb54c2={'id':_0x2a9848,'x':_0x14bac3+_0x3f226d*_0x56ad50+(_0x56ad50-this[_0x4bbf('0x21')])/0x2,'y':_0x52b394+_0x4fb662*_0x3a162f+(_0x3a162f-this[_0x4bbf('0x21')])/0x2,'width':this[_0x4bbf('0x21')],'height':this['orangeSize'],'onPlate':![],'plateId':null,'scale':0x1,'targetScale':0x1};_0xfb54c2['x']=Math['max'](_0x14bac3,Math['min'](_0xfb54c2['x'],_0x14bac3+_0x520c6c-this['orangeSize']));_0xfb54c2['y']=Math['max'](_0x52b394,Math['min'](_0xfb54c2['y'],_0x52b394+_0x3c375e-this['orangeSize']));}this['oranges']['push'](_0xfb54c2);}}[_0x4bbf('0x18')](){this['canvas'][_0x4bbf('0x64')]('mousedown',_0x26fef7=>this['handleStart'](_0x26fef7));this[_0x4bbf('0x73')][_0x4bbf('0x64')]('mousemove',_0x514b6a=>this[_0x4bbf('0x61')](_0x514b6a));this['canvas']['addEventListener']('mouseup',_0xafbdfd=>this[_0x4bbf('0x2a')](_0xafbdfd));this[_0x4bbf('0x73')][_0x4bbf('0x64')](_0x4bbf('0x83'),_0x3feec1=>{_0x3feec1['preventDefault']();for(let _0x5c19a1=0x0;_0x5c19a1<_0x3feec1['changedTouches']['length'];_0x5c19a1++){this[_0x4bbf('0x52')](_0x3feec1[_0x4bbf('0x3d')][_0x5c19a1]);}});this['canvas'][_0x4bbf('0x64')](_0x4bbf('0x5c'),_0x1cec02=>{_0x1cec02['preventDefault']();for(let _0x4862c8=0x0;_0x4862c8<_0x1cec02['changedTouches'][_0x4bbf('0x11')];_0x4862c8++){this['handleTouchMove'](_0x1cec02[_0x4bbf('0x3d')][_0x4862c8]);}});this['canvas']['addEventListener']('touchend',_0x3d59c1=>{_0x3d59c1['preventDefault']();for(let _0x27902e=0x0;_0x27902e<_0x3d59c1[_0x4bbf('0x3d')]['length'];_0x27902e++){this[_0x4bbf('0x8')](_0x3d59c1['changedTouches'][_0x27902e]);}});this[_0x4bbf('0x73')]['addEventListener']('contextmenu',_0x4a6c6e=>_0x4a6c6e[_0x4bbf('0x51')]());}[_0x4bbf('0x66')](){this['toggleModeBtn']['addEventListener']('click',()=>{this[_0x4bbf('0x36')]();});this[_0x4bbf('0x3e')][_0x4bbf('0x64')](_0x4bbf('0x6b'),()=>{this[_0x4bbf('0x35')]();});}['toggleMode'](){if(this[_0x4bbf('0x2')]){this[_0x4bbf('0x2')]=![];this[_0x4bbf('0xf')]['textContent']='圈分';this['toggleModeBtn'][_0x4bbf('0x1b')]['remove'](_0x4bbf('0x39'));this[_0x4bbf('0x73')]['classList'][_0x4bbf('0x4e')](_0x4bbf('0x76'));this['instruction']['textContent']='拖动橘子放到盘子里';this[_0x4bbf('0x81')]();}else{this['isSelectMode']=!![];this['toggleModeBtn'][_0x4bbf('0x2e')]='退出';this['toggleModeBtn']['classList'][_0x4bbf('0x46')]('active');this['canvas'][_0x4bbf('0x1b')][_0x4bbf('0x46')](_0x4bbf('0x76'));this['instruction'][_0x4bbf('0x2e')]='画线围住6个橘子，然后拖动会自动分配。';this[_0x4bbf('0x81')]();}}[_0x4bbf('0x81')](){this[_0x4bbf('0x58')]=[];this['selectionPath']=[];this['isSelecting']=![];this['isDraggingSelection']=![];this['ghostOranges']=[];this['originalPositions']=null;this[_0x4bbf('0x73')][_0x4bbf('0x1b')][_0x4bbf('0x4e')]('dragging-selection');}['getCanvasCoordinates'](_0xc90d0f){const _0x4dbf58=this[_0x4bbf('0x73')]['getBoundingClientRect']();return{'x':_0xc90d0f[_0x4bbf('0x3')]-_0x4dbf58['left'],'y':_0xc90d0f[_0x4bbf('0x40')]-_0x4dbf58['top']};}['handleStart'](_0x569391){const _0x1b4f8a=this['getCanvasCoordinates'](_0x569391);if(this['isSelectMode']){if(this['selectedOranges'][_0x4bbf('0x11')]===0x6&&this['isPointInSelectionPath'](_0x1b4f8a)){this['isDraggingSelection']=!![];const _0x53ccfd=this[_0x4bbf('0x2f')]();this['selectionDragOffset']['x']=_0x1b4f8a['x']-_0x53ccfd['x'];this['selectionDragOffset']['y']=_0x1b4f8a['y']-_0x53ccfd['y'];if(this[_0x4bbf('0x4a')]){this[_0x4bbf('0x63')]=this[_0x4bbf('0x4a')]['map'](_0x5ed1e6=>({'x':_0x5ed1e6['x'],'y':_0x5ed1e6['y'],'width':_0x5ed1e6[_0x4bbf('0x72')],'height':_0x5ed1e6[_0x4bbf('0x41')]}));}}else if(this['selectedOranges']['length']===0x6){this['clearSelection']();this[_0x4bbf('0x7d')]=!![];this['selectionPath']=[{'x':_0x1b4f8a['x'],'y':_0x1b4f8a['y']}];this[_0x4bbf('0x58')]=[];}else{this[_0x4bbf('0x7d')]=!![];this[_0x4bbf('0x3b')]=[{'x':_0x1b4f8a['x'],'y':_0x1b4f8a['y']}];this[_0x4bbf('0x58')]=[];}}else{for(let _0x2a95e5=this['oranges']['length']-0x1;_0x2a95e5>=0x0;_0x2a95e5--){const _0x2919d9=this[_0x4bbf('0x27')][_0x2a95e5];if(this[_0x4bbf('0x45')](_0x1b4f8a,_0x2919d9)){this[_0x4bbf('0xd')]=!![];this['dragOrange']=_0x2919d9;this['dragOffset']['x']=_0x1b4f8a['x']-_0x2919d9['x'];this['dragOffset']['y']=_0x1b4f8a['y']-_0x2919d9['y'];_0x2919d9[_0x4bbf('0x6c')]=1.1;if(_0x2919d9[_0x4bbf('0x70')]&&_0x2919d9[_0x4bbf('0x1d')]!==null){const _0x791e8c=this['plates'][_0x2919d9[_0x4bbf('0x1d')]];const _0x49f426=_0x791e8c[_0x4bbf('0x27')][_0x4bbf('0x10')](_0x2919d9);if(_0x49f426>-0x1){_0x791e8c[_0x4bbf('0x27')]['splice'](_0x49f426,0x1);this[_0x4bbf('0x57')](_0x791e8c);}_0x2919d9['onPlate']=![];_0x2919d9['plateId']=null;}break;}}}}[_0x4bbf('0x61')](_0x3200c3){const _0x350ecf=this[_0x4bbf('0x1')](_0x3200c3);if(this['isSelectMode']){if(this[_0x4bbf('0x7d')]){const _0x7bd633=this['selectionPath'][this['selectionPath']['length']-0x1];const _0x1fe188=Math['sqrt'](Math['pow'](_0x350ecf['x']-_0x7bd633['x'],0x2)+Math[_0x4bbf('0x6e')](_0x350ecf['y']-_0x7bd633['y'],0x2));if(_0x1fe188>0x3){this[_0x4bbf('0x3b')]['push']({'x':_0x350ecf['x'],'y':_0x350ecf['y']});this['updateSelectionFromPath']();}}else if(this['isDraggingSelection']&&this[_0x4bbf('0x58')][_0x4bbf('0x11')]===0x6){const _0x1a8de3=this[_0x4bbf('0x2f')]();const _0x20a7b6=_0x350ecf['x']-this[_0x4bbf('0x6d')]['x'];const _0x4e3840=_0x350ecf['y']-this[_0x4bbf('0x6d')]['y'];const _0x3a6415=_0x20a7b6-_0x1a8de3['x'];const _0x204ff6=_0x4e3840-_0x1a8de3['y'];this['selectedOranges'][_0x4bbf('0x85')](_0x484d30=>{_0x484d30['x']+=_0x3a6415;_0x484d30['y']+=_0x204ff6;});}}else{if(!this[_0x4bbf('0xd')]||!this[_0x4bbf('0x20')])return;const _0x56208c=0x5;let _0xfbca92=_0x350ecf['x']-this['dragOffset']['x'];let _0x1c6d7c=_0x350ecf['y']-this['dragOffset']['y'];_0xfbca92=Math['max'](_0x56208c,Math['min'](_0xfbca92,this[_0x4bbf('0x73')]['width']-this[_0x4bbf('0x20')][_0x4bbf('0x72')]-_0x56208c));_0x1c6d7c=Math[_0x4bbf('0x28')](_0x56208c,Math['min'](_0x1c6d7c,this[_0x4bbf('0x73')][_0x4bbf('0x41')]-this['dragOrange']['height']-_0x56208c));this['dragOrange']['x']=_0xfbca92;this[_0x4bbf('0x20')]['y']=_0x1c6d7c;this['hoveredPlate']=null;this[_0x4bbf('0x4d')][_0x4bbf('0x85')](_0x31b444=>{_0x31b444[_0x4bbf('0x16')]=![];_0x31b444[_0x4bbf('0x6c')]=0x1;if(this[_0x4bbf('0x5e')](_0x350ecf,_0x31b444)){this['hoveredPlate']=_0x31b444;_0x31b444['highlight']=!![];_0x31b444['targetScale']=1.05;}});}}[_0x4bbf('0x2a')](_0x46102e){const _0x1c3957=this[_0x4bbf('0x1')](_0x46102e);if(this[_0x4bbf('0x2')]){if(this['isSelecting']){this[_0x4bbf('0x7d')]=![];if(this['selectionPath']['length']>0x2){this[_0x4bbf('0x3b')][_0x4bbf('0x84')](this['selectionPath'][0x0]);this['updateSelectionFromPath']();this['finalizeSelection']();}}else if(this[_0x4bbf('0x74')]){this[_0x4bbf('0x74')]=![];if(this['selectedOranges']['length']===0x6){this['autoDistributeToPlates']();}}}else{if(!this[_0x4bbf('0xd')]||!this[_0x4bbf('0x20')])return;const _0x108ea1=this[_0x4bbf('0x6f')](_0x1c3957);if(_0x108ea1){this['placeOrangeOnPlate'](this[_0x4bbf('0x20')],_0x108ea1);}this['dragOrange'][_0x4bbf('0x6c')]=0x1;this[_0x4bbf('0x4d')][_0x4bbf('0x85')](_0x4e8101=>{_0x4e8101[_0x4bbf('0x16')]=![];_0x4e8101['targetScale']=0x1;});this['isDragging']=![];this['dragOrange']=null;this[_0x4bbf('0x69')]=null;}}['handleTouchStart'](_0x3d4452){const _0x2ea8bd=this['getCanvasCoordinates'](_0x3d4452);if(this[_0x4bbf('0x2')]){this[_0x4bbf('0x24')](_0x3d4452);return;}for(let _0x29f0c7=this['oranges']['length']-0x1;_0x29f0c7>=0x0;_0x29f0c7--){const _0x202680=this['oranges'][_0x29f0c7];if(this['isPointInOrange'](_0x2ea8bd,_0x202680)&&!_0x202680['onPlate']){let _0x5cb482=![];for(let [_0x14417c,_0x452f3e]of this['activeTouches']){if(_0x452f3e[_0x4bbf('0x14')]===_0x202680){_0x5cb482=!![];break;}}if(!_0x5cb482){this[_0x4bbf('0x42')]['set'](_0x3d4452['identifier'],{'orange':_0x202680,'offset':{'x':_0x2ea8bd['x']-_0x202680['x'],'y':_0x2ea8bd['y']-_0x202680['y']}});_0x202680[_0x4bbf('0x6c')]=1.1;if(_0x202680['onPlate']&&_0x202680[_0x4bbf('0x1d')]!==null){const _0x28c14a=this['plates'][_0x202680['plateId']];const _0x2ab2b8=_0x28c14a['oranges'][_0x4bbf('0x10')](_0x202680);if(_0x2ab2b8>-0x1){_0x28c14a['oranges']['splice'](_0x2ab2b8,0x1);this['arrangeOrangesOnPlate'](_0x28c14a);}_0x202680[_0x4bbf('0x70')]=![];_0x202680['plateId']=null;}break;}}}}[_0x4bbf('0x79')](_0x195d3b){const _0x473473=this[_0x4bbf('0x1')](_0x195d3b);if(this['isSelectMode']){this['handleMove'](_0x195d3b);return;}const _0x54b7aa=this[_0x4bbf('0x42')][_0x4bbf('0x80')](_0x195d3b['identifier']);if(_0x54b7aa){const _0x50ff57=_0x54b7aa[_0x4bbf('0x14')];_0x50ff57['x']=_0x473473['x']-_0x54b7aa['offset']['x'];_0x50ff57['y']=_0x473473['y']-_0x54b7aa['offset']['y'];this['plates']['forEach'](_0x450b4a=>{_0x450b4a['highlight']=![];_0x450b4a['targetScale']=0x1;});const _0x1eb0b3=this['getPlateAt'](_0x473473);if(_0x1eb0b3){_0x1eb0b3['highlight']=!![];_0x1eb0b3[_0x4bbf('0x6c')]=1.1;}}}[_0x4bbf('0x8')](_0x585021){const _0x4b58fa=this['getCanvasCoordinates'](_0x585021);if(this[_0x4bbf('0x2')]){this['handleEnd'](_0x585021);return;}const _0x3e6e99=this[_0x4bbf('0x42')][_0x4bbf('0x80')](_0x585021['identifier']);if(_0x3e6e99){const _0x45eeeb=_0x3e6e99[_0x4bbf('0x14')];const _0x35b119=this[_0x4bbf('0x6f')](_0x4b58fa);if(_0x35b119){this['placeOrangeOnPlate'](_0x45eeeb,_0x35b119);}_0x45eeeb[_0x4bbf('0x6c')]=0x1;this[_0x4bbf('0x42')][_0x4bbf('0x1c')](_0x585021['identifier']);}this['plates']['forEach'](_0x5e74f4=>{_0x5e74f4[_0x4bbf('0x16')]=![];_0x5e74f4[_0x4bbf('0x6c')]=0x1;});}[_0x4bbf('0x45')](_0x4c5577,_0x2e795f){return _0x4c5577['x']>=_0x2e795f['x']&&_0x4c5577['x']<=_0x2e795f['x']+_0x2e795f[_0x4bbf('0x72')]&&_0x4c5577['y']>=_0x2e795f['y']&&_0x4c5577['y']<=_0x2e795f['y']+_0x2e795f[_0x4bbf('0x41')];}['isPointInPlate'](_0x45fd65,_0x3f15b8){const _0x5b5115=0x28;return _0x45fd65['x']>=_0x3f15b8['x']&&_0x45fd65['x']<=_0x3f15b8['x']+_0x3f15b8[_0x4bbf('0x72')]&&_0x45fd65['y']>=_0x3f15b8['y']-_0x5b5115&&_0x45fd65['y']<=_0x3f15b8['y']+_0x3f15b8['height'];}[_0x4bbf('0x6f')](_0x3e90a6){for(let _0x2b40a1 of this['plates']){if(this[_0x4bbf('0x5e')](_0x3e90a6,_0x2b40a1)){return _0x2b40a1;}}return null;}['isPointInSelectionPath'](_0xff2a29){if(this['selectionPath'][_0x4bbf('0x11')]<0x3||this['selectedOranges'][_0x4bbf('0x11')]!==0x6)return![];return this[_0x4bbf('0x37')](_0xff2a29,this[_0x4bbf('0x3b')]);}['updateSelectionFromPath'](){if(this[_0x4bbf('0x3b')][_0x4bbf('0x11')]<0x3){this[_0x4bbf('0x58')]=[];return;}this['selectedOranges']=[];this['oranges'][_0x4bbf('0x85')](_0x583c88=>{if(!_0x583c88['onPlate']&&this[_0x4bbf('0x54')](_0x583c88)){this[_0x4bbf('0x58')][_0x4bbf('0x84')](_0x583c88);}});}[_0x4bbf('0x54')](_0x1e1d68){if(this[_0x4bbf('0x3b')][_0x4bbf('0x11')]<0x3)return![];const _0x24b1e7=_0x1e1d68['x']+_0x1e1d68[_0x4bbf('0x72')]/0x2;const _0x44076c=_0x1e1d68['y']+_0x1e1d68['height']/0x2;const _0x205c93=_0x1e1d68['width']/0x3;const _0x43ae3a=[{'x':_0x24b1e7,'y':_0x44076c},{'x':_0x24b1e7-_0x205c93,'y':_0x44076c},{'x':_0x24b1e7+_0x205c93,'y':_0x44076c},{'x':_0x24b1e7,'y':_0x44076c-_0x205c93},{'x':_0x24b1e7,'y':_0x44076c+_0x205c93}];return _0x43ae3a[_0x4bbf('0x7a')](_0x33776c=>this[_0x4bbf('0x37')](_0x33776c,this[_0x4bbf('0x3b')]));}[_0x4bbf('0x37')](_0x299800,_0x4c38a4){if(_0x4c38a4['length']<0x3)return![];let _0x563db5=![];for(let _0x30e6f9=0x0,_0xa2f97e=_0x4c38a4['length']-0x1;_0x30e6f9<_0x4c38a4['length'];_0xa2f97e=_0x30e6f9++){const _0x7d413b=_0x4c38a4[_0x30e6f9]['x'],_0x5bcbb4=_0x4c38a4[_0x30e6f9]['y'];const _0x2985ce=_0x4c38a4[_0xa2f97e]['x'],_0x189563=_0x4c38a4[_0xa2f97e]['y'];if(_0x5bcbb4>_0x299800['y']!==_0x189563>_0x299800['y']&&_0x299800['x']<(_0x2985ce-_0x7d413b)*(_0x299800['y']-_0x5bcbb4)/(_0x189563-_0x5bcbb4)+_0x7d413b){_0x563db5=!_0x563db5;}}return _0x563db5;}[_0x4bbf('0x2f')](){if(this[_0x4bbf('0x58')]['length']===0x0)return{'x':0x0,'y':0x0};let _0x5bfcfe=0x0,_0x391d3e=0x0;this[_0x4bbf('0x58')]['forEach'](_0x481779=>{_0x5bfcfe+=_0x481779['x']+_0x481779['width']/0x2;_0x391d3e+=_0x481779['y']+_0x481779[_0x4bbf('0x41')]/0x2;});return{'x':_0x5bfcfe/this[_0x4bbf('0x58')]['length'],'y':_0x391d3e/this['selectedOranges'][_0x4bbf('0x11')]};}[_0x4bbf('0x60')](){if(this[_0x4bbf('0x58')][_0x4bbf('0x11')]===0x6){this[_0x4bbf('0x4a')]=this[_0x4bbf('0x58')]['map'](_0x256fff=>({'x':_0x256fff['x'],'y':_0x256fff['y'],'width':_0x256fff['width'],'height':_0x256fff['height']}));this['canvas']['classList']['add']('dragging-selection');this[_0x4bbf('0x50')]['textContent']='拖动选区自动分配到6个盘子';}else{this['clearSelection']();this[_0x4bbf('0x50')][_0x4bbf('0x2e')]=_0x4bbf('0x30');}}[_0x4bbf('0x48')](){if(this[_0x4bbf('0x58')][_0x4bbf('0x11')]!==0x6)return;if(this['ghostOranges'][_0x4bbf('0x11')]===0x0){this['ghostOranges']=this['originalPositions']?this['originalPositions'][_0x4bbf('0x71')]():this['selectedOranges'][_0x4bbf('0x26')](_0x19d769=>({'x':_0x19d769['x'],'y':_0x19d769['y'],'width':_0x19d769[_0x4bbf('0x72')],'height':_0x19d769['height']}));}this['selectedOranges'][_0x4bbf('0x85')]((_0x4516fb,_0x4c1a56)=>{const _0x30809a=this[_0x4bbf('0x4d')][_0x4c1a56];if(_0x4516fb['onPlate']&&_0x4516fb[_0x4bbf('0x1d')]!==null){const _0x1a5288=this[_0x4bbf('0x4d')][_0x4516fb['plateId']];const _0x37e512=_0x1a5288['oranges'][_0x4bbf('0x10')](_0x4516fb);if(_0x37e512>-0x1){_0x1a5288['oranges']['splice'](_0x37e512,0x1);this[_0x4bbf('0x57')](_0x1a5288);}}_0x30809a['oranges']['push'](_0x4516fb);_0x4516fb['onPlate']=!![];_0x4516fb[_0x4bbf('0x1d')]=_0x30809a['id'];this['arrangeOrangesOnPlate'](_0x30809a);});this['distributionCount']++;this['selectedOranges']=[];this[_0x4bbf('0x3b')]=[];this[_0x4bbf('0x7d')]=![];this[_0x4bbf('0x74')]=![];this[_0x4bbf('0x4a')]=null;this['canvas'][_0x4bbf('0x1b')]['remove']('dragging-selection');let _0x14e257='';if(this['distributionCount']===0x1){_0x14e257='每份先各放1个，分掉6个。';}else if(this['distributionCount']===0x2){_0x14e257=_0x4bbf('0x2d');}else if(this[_0x4bbf('0x4b')]===0x3){_0x14e257=_0x4bbf('0x38');setTimeout(()=>{this[_0x4bbf('0xa')]();},0x7d0);}else{_0x14e257='分配完成！';}this[_0x4bbf('0x50')]['textContent']=_0x14e257;setTimeout(()=>{this[_0x4bbf('0x63')]=[];},0xbb8);this['checkAllOrangesDistributed']();}['placeOrangeOnPlate'](_0x1f410a,_0x8453b){if(_0x1f410a['onPlate']&&_0x1f410a[_0x4bbf('0x1d')]!==null){const _0x42617b=this[_0x4bbf('0x4d')][_0x1f410a[_0x4bbf('0x1d')]];const _0x3aebb1=_0x42617b['oranges'][_0x4bbf('0x10')](_0x1f410a);if(_0x3aebb1>-0x1){_0x42617b[_0x4bbf('0x27')][_0x4bbf('0x5d')](_0x3aebb1,0x1);}}_0x8453b['oranges']['push'](_0x1f410a);this[_0x4bbf('0x57')](_0x8453b);_0x1f410a['onPlate']=!![];_0x1f410a[_0x4bbf('0x1d')]=_0x8453b['id'];_0x1f410a[_0x4bbf('0x6c')]=0x1;this['checkAllOrangesDistributed']();}[_0x4bbf('0x78')](){const _0x29401f=this[_0x4bbf('0x27')][_0x4bbf('0x11')];const _0xad1ba5=this['oranges'][_0x4bbf('0x19')](_0x106ae4=>_0x106ae4[_0x4bbf('0x70')])[_0x4bbf('0x11')];if(_0x29401f===0x12&&_0xad1ba5===0x12){this['toggleModeBtn'][_0x4bbf('0x65')][_0x4bbf('0x82')]='none';this[_0x4bbf('0x3e')]['style']['display']=_0x4bbf('0x25');this['instruction'][_0x4bbf('0x2e')]='所有橘子分配完成！';if(this['isSelectMode']){setTimeout(()=>{this[_0x4bbf('0x4')]();},0x3e8);}}else{this[_0x4bbf('0x3e')][_0x4bbf('0x65')]['display']='none';}}[_0x4bbf('0x4')](){this['isSelectMode']=![];this['toggleModeBtn'][_0x4bbf('0x2e')]='圈分';this[_0x4bbf('0xf')]['classList'][_0x4bbf('0x4e')]('active');this[_0x4bbf('0x73')]['classList'][_0x4bbf('0x4e')]('select-mode');this['clearSelection']();}['arrangeOrangesOnPlate'](_0x2c66d8){const _0x5774a7=_0x2c66d8[_0x4bbf('0x27')][_0x4bbf('0x11')];if(_0x5774a7===0x0)return;const _0x2775d2={'x':_0x2c66d8['x']+_0x2c66d8[_0x4bbf('0x72')]/0x2,'y':_0x2c66d8['y']+_0x2c66d8[_0x4bbf('0x41')]/0x2};if(_0x5774a7===0x1){const _0xabb2e1=_0x2c66d8['oranges'][0x0];_0xabb2e1['x']=_0x2775d2['x']-_0xabb2e1['width']/0x2;_0xabb2e1['y']=_0x2775d2['y']-_0xabb2e1['height']/0x2;}else if(_0x5774a7===0x2){const _0x173a9d=0x32;_0x2c66d8[_0x4bbf('0x27')][_0x4bbf('0x85')]((_0x24dbd4,_0x4d3916)=>{_0x24dbd4['x']=_0x2775d2['x']-_0x24dbd4[_0x4bbf('0x72')]/0x2+(_0x4d3916-0.5)*_0x173a9d;_0x24dbd4['y']=_0x2775d2['y']-_0x24dbd4['height']/0x2;});}else if(_0x5774a7===0x3){const _0x5a0304=[{'x':0x0,'y':-0x28},{'x':-0x19,'y':0x0},{'x':0x19,'y':0x0}];_0x2c66d8[_0x4bbf('0x27')][_0x4bbf('0x85')]((_0x326c8a,_0x1bd580)=>{_0x326c8a['x']=_0x2775d2['x']-_0x326c8a['width']/0x2+_0x5a0304[_0x1bd580]['x'];_0x326c8a['y']=_0x2775d2['y']-_0x326c8a[_0x4bbf('0x41')]/0x2+_0x5a0304[_0x1bd580]['y'];});}else if(_0x5774a7===0x4){const _0x1bf6f5=[{'x':-0x17,'y':-0x23},{'x':0x17,'y':-0x23},{'x':-0x19,'y':0xa},{'x':0x19,'y':0xa}];_0x2c66d8['oranges']['forEach']((_0x12ef2d,_0x341dda)=>{_0x12ef2d['x']=_0x2775d2['x']-_0x12ef2d['width']/0x2+_0x1bf6f5[_0x341dda]['x'];_0x12ef2d['y']=_0x2775d2['y']-_0x12ef2d[_0x4bbf('0x41')]/0x2+_0x1bf6f5[_0x341dda]['y'];});}else{const _0x25fde0=0x1e;_0x2c66d8['oranges']['forEach']((_0x3c67c4,_0x50f823)=>{const _0x3fc527=_0x50f823/_0x5774a7*0x2*Math['PI'];_0x3c67c4['x']=_0x2775d2['x']-_0x3c67c4['width']/0x2+Math[_0x4bbf('0x62')](_0x3fc527)*_0x25fde0;_0x3c67c4['y']=_0x2775d2['y']-_0x3c67c4['height']/0x2+Math[_0x4bbf('0x1a')](_0x3fc527)*_0x25fde0;});}}[_0x4bbf('0x34')](_0x40ffd6){if(_0x40ffd6['onPlate']&&_0x40ffd6['plateId']!==null){const _0x43bbaa=this[_0x4bbf('0x4d')][_0x40ffd6[_0x4bbf('0x1d')]];const _0x52e5c4=_0x43bbaa['oranges']['indexOf'](_0x40ffd6);if(_0x52e5c4>-0x1){_0x43bbaa['oranges'][_0x4bbf('0x5d')](_0x52e5c4,0x1);this['arrangeOrangesOnPlate'](_0x43bbaa);}}const _0x26c272=0xa;const _0x5470da=this['canvas']['height']-0xc8;_0x40ffd6['x']=Math[_0x4bbf('0x22')]()*(this['canvas']['width']-_0x40ffd6['width']-0x2*_0x26c272)+_0x26c272;_0x40ffd6['y']=Math[_0x4bbf('0x22')]()*(_0x5470da-_0x40ffd6['height']-0x2*_0x26c272)+_0x26c272;_0x40ffd6[_0x4bbf('0x70')]=![];_0x40ffd6[_0x4bbf('0x1d')]=null;_0x40ffd6['targetScale']=0x1;}[_0x4bbf('0x1f')](){this[_0x4bbf('0x27')]['forEach'](_0x5aaf5c=>{_0x5aaf5c[_0x4bbf('0x59')]+=(_0x5aaf5c[_0x4bbf('0x6c')]-_0x5aaf5c['scale'])*0.2;});this['plates'][_0x4bbf('0x85')](_0x146ff1=>{_0x146ff1[_0x4bbf('0x59')]+=(_0x146ff1['targetScale']-_0x146ff1['scale'])*0.2;});}['render'](){this[_0x4bbf('0x7')][_0x4bbf('0x2b')](0x0,0x0,this['canvas'][_0x4bbf('0x72')],this['canvas'][_0x4bbf('0x41')]);if(this['ghostOranges'][_0x4bbf('0x11')]>0x0){this['ctx']['save']();this[_0x4bbf('0x7')][_0x4bbf('0x6')]=0.3;this[_0x4bbf('0x7')][_0x4bbf('0x67')]=!![];this[_0x4bbf('0x7')]['imageSmoothingQuality']='high';this['ghostOranges']['forEach'](_0x4b47a7=>{const _0x511f01=Math[_0x4bbf('0x43')](_0x4b47a7['x']);const _0xafb2cb=Math[_0x4bbf('0x43')](_0x4b47a7['y']);const _0x1c375d=Math[_0x4bbf('0x43')](_0x4b47a7['width']);const _0xf0cea7=Math[_0x4bbf('0x43')](_0x4b47a7[_0x4bbf('0x41')]);this[_0x4bbf('0x7')]['drawImage'](this[_0x4bbf('0x23')][_0x4bbf('0x14')],_0x511f01,_0xafb2cb,_0x1c375d,_0xf0cea7);});this['ctx']['restore']();}this[_0x4bbf('0x4d')][_0x4bbf('0x85')](_0x2fc626=>{this[_0x4bbf('0x7')]['save']();const _0x54463e=_0x2fc626['x']+_0x2fc626['width']/0x2;const _0x4fb429=_0x2fc626['y']+_0x2fc626['height']/0x2;this['ctx'][_0x4bbf('0x7c')](_0x54463e,_0x4fb429);if(_0x2fc626[_0x4bbf('0x16')]){this[_0x4bbf('0x7')][_0x4bbf('0x19')]=_0x4bbf('0x55');}this[_0x4bbf('0x7')][_0x4bbf('0x67')]=!![];this[_0x4bbf('0x7')]['imageSmoothingQuality']=_0x4bbf('0x31');const _0x1c2e05=this[_0x4bbf('0x23')][_0x4bbf('0x44')];const _0x696d4c=_0x1c2e05['width']/_0x1c2e05[_0x4bbf('0x41')];let _0x5df4fa=_0x2fc626['width']*_0x2fc626[_0x4bbf('0x59')];let _0x5b646f=_0x2fc626[_0x4bbf('0x72')]*_0x2fc626['scale']/_0x696d4c;if(_0x5b646f>_0x2fc626['height']*_0x2fc626[_0x4bbf('0x59')]){_0x5b646f=_0x2fc626[_0x4bbf('0x41')]*_0x2fc626[_0x4bbf('0x59')];_0x5df4fa=_0x2fc626[_0x4bbf('0x41')]*_0x2fc626[_0x4bbf('0x59')]*_0x696d4c;}const _0x1b9902=Math[_0x4bbf('0x43')](-_0x5df4fa/0x2);const _0x170b1c=Math[_0x4bbf('0x43')](-_0x5b646f/0x2);const _0x4e6618=Math['round'](_0x5df4fa);const _0x40bec1=Math[_0x4bbf('0x43')](_0x5b646f);this[_0x4bbf('0x7')]['drawImage'](_0x1c2e05,_0x1b9902,_0x170b1c,_0x4e6618,_0x40bec1);this[_0x4bbf('0x7')][_0x4bbf('0x3c')]();});const _0x3fbbac=[...this['oranges']];if(this['dragOrange']){const _0x10bd4f=_0x3fbbac['indexOf'](this['dragOrange']);_0x3fbbac[_0x4bbf('0x5d')](_0x10bd4f,0x1);_0x3fbbac['push'](this['dragOrange']);}_0x3fbbac['forEach'](_0x5851f5=>{this[_0x4bbf('0x7')][_0x4bbf('0x1e')]();const _0x5333c6=_0x5851f5['x']+_0x5851f5['width']/0x2;const _0x12dc40=_0x5851f5['y']+_0x5851f5[_0x4bbf('0x41')]/0x2;this['ctx'][_0x4bbf('0x7c')](_0x5333c6,_0x12dc40);this[_0x4bbf('0x7')]['scale'](_0x5851f5['scale'],_0x5851f5['scale']);this['ctx']['imageSmoothingEnabled']=!![];this['ctx'][_0x4bbf('0x7f')]=_0x4bbf('0x31');if(this[_0x4bbf('0x58')][_0x4bbf('0x4f')](_0x5851f5)){this['ctx']['shadowColor']='#FFD700';this[_0x4bbf('0x7')]['shadowBlur']=0xa;}const _0x317980=Math[_0x4bbf('0x43')](-_0x5851f5['width']/0x2);const _0x470003=Math[_0x4bbf('0x43')](-_0x5851f5['height']/0x2);const _0x4ab244=Math[_0x4bbf('0x43')](_0x5851f5[_0x4bbf('0x72')]);const _0x132cb1=Math[_0x4bbf('0x43')](_0x5851f5[_0x4bbf('0x41')]);this[_0x4bbf('0x7')]['drawImage'](this[_0x4bbf('0x23')][_0x4bbf('0x14')],_0x317980,_0x470003,_0x4ab244,_0x132cb1);this[_0x4bbf('0x7')][_0x4bbf('0x3c')]();});if(this[_0x4bbf('0x2')]&&this['selectionPath'][_0x4bbf('0x11')]>0x0){this['ctx']['save']();if(this[_0x4bbf('0x58')]['length']===0x6){this['ctx']['strokeStyle']='#4CAF50';this['ctx']['fillStyle']=_0x4bbf('0x5');}else{this['ctx']['strokeStyle']='#FF6B35';this[_0x4bbf('0x7')]['fillStyle']=_0x4bbf('0x9');}this[_0x4bbf('0x7')]['lineWidth']=0x3;this[_0x4bbf('0x7')]['lineCap']='round';this['ctx']['lineJoin']=_0x4bbf('0x43');if(this['selectionPath'][_0x4bbf('0x11')]>0x2&&!this[_0x4bbf('0x7d')]){this[_0x4bbf('0x7')][_0x4bbf('0x7b')]();this['ctx'][_0x4bbf('0x12')](this['selectionPath'][0x0]['x'],this['selectionPath'][0x0]['y']);for(let _0xe845f7=0x1;_0xe845f7<this['selectionPath'][_0x4bbf('0x11')];_0xe845f7++){this['ctx']['lineTo'](this[_0x4bbf('0x3b')][_0xe845f7]['x'],this[_0x4bbf('0x3b')][_0xe845f7]['y']);}this[_0x4bbf('0x7')]['closePath']();this[_0x4bbf('0x7')]['fill']();}this[_0x4bbf('0x7')]['beginPath']();if(this['selectionPath'][_0x4bbf('0x11')]>0x0){this['ctx'][_0x4bbf('0x12')](this['selectionPath'][0x0]['x'],this[_0x4bbf('0x3b')][0x0]['y']);for(let _0x47c743=0x1;_0x47c743<this[_0x4bbf('0x3b')]['length'];_0x47c743++){this[_0x4bbf('0x7')]['lineTo'](this['selectionPath'][_0x47c743]['x'],this[_0x4bbf('0x3b')][_0x47c743]['y']);}if(!this[_0x4bbf('0x7d')]&&this[_0x4bbf('0x3b')]['length']>0x2){this[_0x4bbf('0x7')][_0x4bbf('0x13')]();}}this['ctx'][_0x4bbf('0x47')]();if(this['selectedOranges'][_0x4bbf('0x11')]>0x0&&this[_0x4bbf('0x3b')][_0x4bbf('0x11')]>0x2){let _0x421777=0x0,_0x32d863=0x0;this['selectionPath']['forEach'](_0x57b06c=>{_0x421777+=_0x57b06c['x'];_0x32d863+=_0x57b06c['y'];});_0x421777/=this['selectionPath'][_0x4bbf('0x11')];_0x32d863/=this['selectionPath'][_0x4bbf('0x11')];this['ctx']['fillStyle']=this[_0x4bbf('0x58')]['length']===0x6?'#4CAF50':'#FF6B35';this[_0x4bbf('0x7')]['font']='bold\x2016px\x20Arial';this['ctx'][_0x4bbf('0x33')]=_0x4bbf('0x68');this[_0x4bbf('0x7')]['fillText']('已选择:\x20'+this[_0x4bbf('0x58')]['length'],_0x421777,_0x32d863-0xa);this[_0x4bbf('0x7')]['textAlign']=_0x4bbf('0x53');}this[_0x4bbf('0x7')][_0x4bbf('0x3c')]();}}[_0x4bbf('0x5a')](){this[_0x4bbf('0x1f')]();this['render']();requestAnimationFrame(()=>this['gameLoop']());}}window['addEventListener']('load',()=>{new CanvasDragGame();});
    </script>
</body>
</html>