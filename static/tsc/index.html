<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>提示词库</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="category-bar" id="category-bar">
            <button class="category-btn active" data-category="all">全部提示词</button>
            <button class="category-btn" data-category="评价">评价</button>
            <button class="category-btn" data-category="图片">图片</button>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="prompt-grid" id="prompt-grid">
                <!-- 提示词卡片将通过JS动态添加 -->
            </div>
        </div>
    </main>

    <script>
// 存储提示词数据
let prompts = [];

// DOM元素
const categoryBar = document.getElementById('category-bar');
const promptGrid = document.getElementById('prompt-grid');
const closeButtons = document.querySelectorAll('.close-btn');

// 初始化页面
async function init() {
    await loadPromptsFromJson();
    renderPrompts();
    setupEventListeners();
}

// 从JSON文件加载提示词数据
async function loadPromptsFromJson() {
    try {
        prompts = [];
        const files = ['1.json', '2.json'];
        
        // 并行加载所有JSON文件
        const results = await Promise.all(
            files.map(filename =>
                fetch(filename)
                    .then(response => response.ok ? response.json() : Promise.reject(`HTTP ${response.status}`))
                    .catch(error => {
                        console.error(`加载提示词${filename}失败:`, error);
                        return null;
                    })
            )
        );

        // 处理加载结果
        results.forEach(promptArray => {
            if (promptArray) {
                prompts.push(...promptArray);
            }
        });
    } catch (error) {
        console.error('加载提示词数据失败:', error);
    }
}

// 设置事件监听器
function setupEventListeners() {
    // 为"全部"按钮添加事件监听器
    const allButton = document.querySelector('.category-btn[data-category="all"]');
    if (allButton) {
        allButton.addEventListener('click', () => {
            filterPromptsByCategory('all');
            // 更新活跃状态
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            allButton.classList.add('active');
        });
    }
}

// 渲染提示词卡片
function renderPrompts(filteredPrompts = null) {
    promptGrid.innerHTML = '';
    
    const promptsToRender = filteredPrompts || prompts;
    
    promptsToRender.forEach(prompt => {
        const card = document.createElement('div');
        card.className = 'prompt-card';
        
        const header = document.createElement('div');
        header.className = 'card-header';
        
        const title = document.createElement('h3');
        title.className = 'card-title';
        title.textContent = prompt.title;
        
        const category = document.createElement('span');
        category.className = 'card-category';
        category.textContent = prompt.category;
        
        header.appendChild(title);
        header.appendChild(category);
        
        const body = document.createElement('div');
        body.className = 'card-body';
        
        const description = document.createElement('p');
        description.className = 'card-description';
        description.textContent = prompt.description;
        
        const content = document.createElement('div');
        content.className = 'prompt-content';
        content.textContent = prompt.content;
        
        const actions = document.createElement('div');
        actions.className = 'card-actions';
        
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.innerHTML = '复制';
        copyBtn.addEventListener('click', () => copyPrompt(prompt.content));
        
        body.appendChild(description);
        body.appendChild(content);
        body.appendChild(actions);
        actions.appendChild(copyBtn);
        
        card.appendChild(header);
        card.appendChild(body);
        
        promptGrid.appendChild(card);
    });
}

// 按分类筛选提示词
function filterPromptsByCategory(category) {
    if (category === 'all') {
        renderPrompts();
        return;
    }
    
    const filtered = prompts.filter(prompt => prompt.category === category);
    renderPrompts(filtered);
}

// 复制提示词到剪贴板
function copyPrompt(text) {
    navigator.clipboard.writeText(text).then(() => {
        showToast('提示词已复制到剪贴板');
    });
}

// 显示提示消息
function showToast(message) {
    const toast = document.createElement('div');
    toast.style.position = 'fixed';
    toast.style.top = '20px';
    toast.style.left = '50%';
    toast.style.transform = 'translateX(-50%)';
    toast.style.background = 'var(--success-color)';
    toast.style.color = 'white';
    toast.style.padding = '10px 20px';
    toast.style.borderRadius = '4px';
    toast.style.boxShadow = 'var(--shadow)';
    toast.style.zIndex = '2000';
    toast.textContent = message;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        document.body.removeChild(toast);
    }, 2000);
}

// 初始化页面
init();
    </script>
</body>
</html>