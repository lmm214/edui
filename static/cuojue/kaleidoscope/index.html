<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>ä¸‡èŠ±ç­’ ï½œ Kaleidoscope</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../style.css" />
  </head>

  <body class="illusion">
    <div class="wrapper">
      <div class="optical-toy themeA">
        <div class="menu">
          <div class="mainMenu">
            <h2><a href="/cuojue">å…‰å­¦ç©å…·</a></h2>
            <h3>ä¸‡èŠ±ç­’</h3>
          </div>

          
          <div class="submenu">
            <a href="../lilac-chaser/">ä¸‹ä¸€ä¸ªé”™è§‰ â€º</a>
          </div>
          
          <div class="submenu fit"><a href="#about">ğŸ‘‡äº†è§£æ›´å¤š</a></div>
        </div>

        <div class="the-toy">
          <canvas id="canvas" class=""></canvas>
        </div>
        <div class="instructions">
          <div class="how-and-what">
            <h2>å¦‚ä½•/ä»€ä¹ˆ?</h2>
            <p>è¿™å¹¶ä¸æ˜¯çœŸæ­£çš„è§†é”™è§‰ï¼Œä½†å®ƒæ˜¯å…‰å­¦çš„ï¼Œè€Œä¸”å¾ˆé…·ã€‚æ‹–æ”¾å›¾åƒï¼</p>
          </div>
          <div class="controls"></div>
        </div>
      </div>
    </div>

    <div id="about" class="about">
      <p><strong>å†…å®¹:</strong>å¥½å§ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ç§è§†é”™è§‰ï¼Œä½†å®ƒæ˜¯ä¸€ç§å¾ˆå¥½çš„å…‰å­¦æ•ˆæœï¼Œå¯ä»¥å¾ˆå¥½åœ°è½¬åŒ–ä¸ºæ•°å­—æ—¶ä»£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æ‹¿åˆ°ç‰©ç†æ•ˆæœï¼Œè§¦è§‰ååº”ä¼šéå¸¸æœ‰è¶£ï¼</p>

      <p>å®ƒçš„åŒ…å«å¾ˆé‡è¦ï¼Œå› ä¸ºä¸‡èŠ±ç­’æ˜¯æœ€æ—©çš„å…‰å­¦ç©å…·ä¹‹ä¸€ï¼Œè¿™ä¸ªåå­—æ˜¯ç”±å®ƒçš„å‘æ˜è€…å¤§å«Â·å¸ƒé²æ–¯ç‰¹ (David Brewster) åœ¨ 1815 å¹´åˆ›é€ çš„ â€¦â€¦ä»–åæ¥å› å…¶å·¥ä½œè€Œäº 1831 å¹´è¢«å°ä¸ºçˆµå£«ï¼Œè¿™å°±æ˜¯å¤§å«Â·å¸ƒé²æ–¯ç‰¹çˆµå£« (Sir David Brewster)ã€‚</p>

      <p><strong>æ“ä½œ:</strong>åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæ‚¨å¯ä»¥ä»æ¡Œé¢æ‹–æ”¾å›¾åƒï¼Œå®ƒå°±ä¼šåœ¨é‚£é‡Œï¼æ‚¨è¿˜å¯ä»¥æ›´æ”¹ç¢ç‰‡çš„æ•°é‡ã€‚æˆ‘è®¤ä¸ºåœ¨ä¸€ä¸ªå®Œç¾çš„ä¸–ç•Œä¸­ï¼Œæˆ‘ä¼šæœ‰å¤šä¸ªå…­è¾¹å½¢é•œåƒï¼Œä½†æˆ‘æ— æ³•å®Œå…¨æ­£ç¡®åœ°è®¡ç®—å‡ºæ•°å­¦ï¼ˆæˆ‘ä¸æ˜¯å¤§å«Â·å¸ƒé²æ–¯ç‰¹ï¼‰ã€‚å¦‚æœæˆ‘åšå¯¹äº†ï¼Œæˆ‘ä¼šæ›´æ–°è¿™ä¸ªï¼</p>

      <p><strong>è§£é‡Š:</strong>ä»”ç»†ä¸”å®Œç¾å®šä½çš„é•œå­ã€‚</p>

    <script src="../js/tweakpane.min.js"></script>
       
    <script>
      const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),defaultImg=new Image;defaultImg.src="../img/over-9000.jpg";let img=defaultImg,pattern,mouseX=0,mouseY=0,targetX=0,targetY=0;const ease=.1;let numSegments=30,radius=Math.max(window.innerWidth,window.innerHeight);function draw(c,d){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.translate(c,d);const b=2*Math.PI/numSegments,a=[{x:0,y:0},{x:radius*Math.cos(0),y:radius*Math.sin(0)},{x:radius*Math.cos(b),y:radius*Math.sin(b)}];for(let c=0;c<numSegments;c++)ctx.save(),c%2!==0?(ctx.rotate(b*(c-.5)),ctx.scale(1,-1),ctx.rotate(b*.5)):ctx.rotate(b*c),ctx.fillStyle=pattern,ctx.translate(mouseX%img.width,mouseY%img.height),ctx.beginPath(),ctx.moveTo(a[0].x-mouseX%img.width,a[0].y-mouseY%img.height),ctx.lineTo(a[1].x-mouseX%img.width,a[1].y-mouseY%img.height),ctx.lineTo(a[2].x-mouseX%img.width,a[2].y-mouseY%img.height),ctx.closePath(),ctx.fill(),ctx.restore();ctx.restore()}function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,draw(canvas.width/2,canvas.height/2)}function animate(){mouseX+=(targetX-mouseX)*ease,mouseY+=(targetY-mouseY)*ease,draw(canvas.width/2,canvas.height/2),requestAnimationFrame(animate)}window.addEventListener("resize",resizeCanvas),canvas.addEventListener("mousemove",a=>{targetX=a.clientX,targetY=a.clientY}),canvas.addEventListener("drop",a=>{a.preventDefault();const c=a.dataTransfer.files[0],b=new FileReader;b.onload=function(a){img=new Image,img.src=a.target.result,img.onload=function(){pattern=ctx.createPattern(img,"repeat"),resizeCanvas(),animate()}},b.readAsDataURL(c)}),canvas.addEventListener("dragover",a=>{a.preventDefault()}),defaultImg.onload=function(){pattern=ctx.createPattern(defaultImg,"repeat"),resizeCanvas(),animate()};let controlParams={Panes:numSegments};const pane=new Tweakpane.Pane({container:document.querySelector(".controls")}),controls=pane.addFolder({title:"è‡ªå®šä¹‰",expanded:!0});controls.addInput(controlParams,"Panes",{min:4,max:100,step:2}).on("change",a=>{numSegments=a.value})
    </script>
    
</body>
</html>