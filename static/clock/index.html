<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PGNpcmNsZSBjeD0iNTAuMDAxIiBjeT0iNTAiIHI9IjUwIiBmaWxsPSIjMjIzNDQ3Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTUwIDEwYzIyLjA5MyAwIDQwIDE3LjkwOSA0MCA0MFM3Mi4wOTQgOTAgNTAgOTBjLTIyLjA5MSAwLTQwLTE3LjkwOS00MC00MHMxNy45MS00MCA0MC00MCIvPjxwYXRoIGZpbGw9IiNEQUQ5RDkiIGQ9Ik01MCAxMC4wMTVjLTExLjgwNiAwLTIyLjQxMyA1LjExOS0yOS43MzMgMTMuMjU0QzI3LjM1MiAxNi44OTYgMzYuNzIzIDEzLjAxNSA0NyAxMy4wMTVjMjIuMDg1IDAgMzkuOTg2IDE3LjkwMiAzOS45ODYgMzkuOTg1YzAgMTAuMjc3LTMuODgxIDE5LjY0Ni0xMC4yNTQgMjYuNzI5Qzg0Ljg3MSA3Mi40MSA4OS45ODggNjEuODA1IDg5Ljk4OCA1MGMwLTIyLjA4My0xNy45MDItMzkuOTg1LTM5Ljk4OC0zOS45ODUiLz48cGF0aCBmaWxsPSIjMjIzNDQ3IiBkPSJNNzMgNDZhNCA0IDAgMCAxIDAgOEg1NGE0IDQgMCAwIDEgMC04eiIvPjxwYXRoIGZpbGw9IiMyMjM0NDciIGQ9Ik0yOC43NzUgMjguNzgxYzEuMTczLTEuMTcgMi45ODctMS4yNiA0LjI1NC4wMDZMNTAgNDUuNzU3YzEuMjY1IDEuMjY1IDEuMTggMy4wNjYuMDA4IDQuMjM1Yy0xLjE3MyAxLjE3LTIuOTgzIDEuMjczLTQuMjUuMDA4TDI4Ljc4NiAzMy4wM2MtMS4yNjctMS4yNjYtMS4xODQtMy4wOC0uMDEyLTQuMjQ5eiIvPjxwYXRoIGZpbGw9IiMyMjM0NDciIGQ9Ik00NiA0My4xYTcuOTk4IDcuOTk4IDAgMSAxLTIuOTI4IDEwLjkyM0E3Ljk5NyA3Ljk5NyAwIDAgMSA0NiA0My4xIi8+PHBhdGggZmlsbD0iI0U0NEQ0MSIgZD0iTTMwLjIwMSA2Ni45N2EyIDIgMCAwIDAgMi44MjggMi44MjlsMTguMzg1LTE4LjM4NWEyIDIgMCAwIDAtMi44MjgtMi44MjhMMzAuMiA2Ni45N3oiLz48L3N2Zz4=">
    <title>简单时钟</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            background-color: #E4E4E1;
            background-image: radial-gradient(at top center, rgba(255,255,255,0.03) 0%, rgba(0,0,0,0.03) 100%), linear-gradient(to top, rgba(255,255,255,0.1) 0%, rgba(143,152,157,0.60) 100%); background-blend-mode: normal, multiply;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        @font-face {
            font-family: 'DigitalNumbers';
            src: url('./DigitalNumbers.ttf') format('truetype');
        }

        .container {
            text-align: center;
        }

        .clock {
            width: min(60vh, 60vh);
            height: min(60vh, 60vh);
            border-radius: 50%;
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            border: calc(60vh * 0.013) solid #504e4d;
            position: relative;
            margin: calc(60vh * 0.08) auto calc(60vh * 0.1) ;
            box-shadow: 0 0 30px rgba(0,0,0,0.15),
                       inset 0 0 50px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .tick {
            position: absolute;
            width: calc(60vh * 0.007);
            height: calc(60vh * 0.033);
            background:#888;
            left: 50%;
            transform-origin: 50% calc(30vh);
        }

        .tick-hour {
            width: calc(60vh * 0.01);
            height: calc(60vh * 0.05);
            background-color: #666;
        }

        .hour, .minute {
            position: absolute;
            left: 50%;
            bottom: 50%;
            transform-origin: bottom;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .hour {
            width: calc(60vh * 0.04);
            height: calc(60vh * 0.23);
            background: linear-gradient(to right, #ff8d8d, #a83232);
            left: calc(50% - 60vh * 0.02);
            clip-path: polygon(
                50% 0%,
                100% 15%,
                100% 100%,
                0% 100%,
                0% 15%
            );
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3),
                       inset 0 0 10px rgba(0,0,0,0.5);
        }

        .minute {
            width: calc(60vh * 0.025);
            height: calc(60vh * 0.35);
            background: linear-gradient(to right, #a6a6da, #1a1a7a);
            left: calc(50% - 60vh * 0.0125);
            clip-path: polygon(
                50% 0%,
                100% 15%,
                100% 100%,
                0% 100%,
                0% 15%
            );
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3),
                       inset 0 0 10px rgba(0,0,0,0.5);
        }

        .center {
            position: absolute;
            width: calc(60vh * 0.05);
            height: calc(60vh * 0.05);
            background: radial-gradient(circle at center, #666, #4a4a4a);
            border: 2px solid #333;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 11;
            box-shadow: 0 0 10px rgba(0,0,0,0.3),
                       inset 0 0 5px rgba(255,255,255,0.2);
        }

        .numbers {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .number {
            position: absolute;
            width: calc(60vh * 0.1);
            height: calc(60vh * 0.1);
            text-align: center;
            line-height: calc(60vh * 0.1);
            font-size: calc(60vh * 0.08);
            color: #555;
            transform-origin: center;
        }

        .digital-time {
            font-size: calc(60vh * 0.12);
            margin-top: 20px;
            color: #333;
            opacity: 1;
            transition: opacity 0.3s ease;
            font-family: 'DigitalNumbers', monospace;
            text-shadow: 1px 1px 1px rgba(255,255,255,0.2),
                       2px 2px 2px rgba(0,0,0,0.1),
                       3px 3px 3px rgba(0,0,0,0.1),
                       4px 4px 4px rgba(0,0,0,0.1),
                       5px 5px 5px rgba(0,0,0,0.1);
        }

        .button-group {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .time-button {
            padding: 15px 25px;
            font-size: 1.5rem;
            color: #555;
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            border: 2px solid #504e4d;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .time-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .time-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .time-button.active {
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
            transform: translateY(0);
            color: #a83232;
            border-color: #a83232;
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
        }

        .n1 { top: 10%; right: 25%; }
        .n2 { top: 25%; right: 10%; }
        .n3 { top: 46%; right: 5%; }
        .n4 { bottom: 25%; right: 10%; }
        .n5 { bottom: 10%; right: 25%; }
        .n6 { bottom: 5%; left: 46%; }
        .n7 { bottom: 10%; left: 25%; }
        .n8 { bottom: 25%; left: 10%; }
        .n9 { top: 46%; left: 5%; }
        .n10 { top: 25%; left: 10%; }
        .n11 { top: 10%; left: 25%; }
        .n12 { top: 5%; left: 46%; }
    </style>
</head>
<body>
    <div class="container">
        <div class="digital-time"></div>
        <div class="clock">
            <div class="hour"></div>
            <div class="minute"></div>
            <div class="center"></div>
            <div class="numbers">
                <span class="number n1">1</span>
                <span class="number n2">2</span>
                <span class="number n3">3</span>
                <span class="number n4">4</span>
                <span class="number n5">5</span>
                <span class="number n6">6</span>
                <span class="number n7">7</span>
                <span class="number n8">8</span>
                <span class="number n9">9</span>
                <span class="number n10">10</span>
                <span class="number n11">11</span>
                <span class="number n12">12</span>
            </div>
            <div id="ticks"></div>
        </div>
        <div class="button-group">
            <button class="time-button" data-minutes="1">每1分钟</button>
            <button class="time-button" data-minutes="5">每5分钟</button>
            <button class="time-button random-time">随机时间</button>

            <button class="time-button toggle-time">隐藏时间</button>
            <button class="time-button toggle-hand" data-hand="hour">隐藏时针</button>
            <button class="time-button toggle-hand" data-hand="minute">隐藏分针</button>
        </div>
    </div>

    <script>
        // 创建刻度
        const ticksContainer = document.getElementById('ticks');
        for (let i = 0; i < 60; i++) {
            const tick = document.createElement('div');
            tick.className = i % 5 === 0 ? 'tick tick-hour' : 'tick';
            tick.style.transform = `rotate(${i * 6}deg)`;
            ticksContainer.appendChild(tick);
        }

        let isDragging = false;
        let startAngle = 0;
        let currentElement = null;
        let initialRotation = 0;
        let hourAngle = 0;
        let minuteAngle = 0;
        let oldMinuteAngle = 0;

        function getRotationDegrees(element) {
            const transform = window.getComputedStyle(element).getPropertyValue('transform');
            if (transform === 'none') return 0;
            const values = transform.split('(')[1].split(')')[0].split(',');
            const a = values[0];
            const b = values[1];
            return Math.round(Math.atan2(b, a) * (180/Math.PI));
        }

        function calculateAngle(event, element) {
            const rect = element.closest('.clock').getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const angle = Math.atan2(event.clientY - centerY, event.clientX - centerX) * (180 / Math.PI);
            return (angle + 360) % 360;
        }

        function handleMouseDown(e) {
            if (!e.target.classList.contains('hour') && !e.target.classList.contains('minute')) return;
            isDragging = true;
            currentElement = e.target;
            startAngle = calculateAngle(e, currentElement);
            initialRotation = currentElement.classList.contains('hour') ? hourAngle : minuteAngle;
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
        }

        let minuteStep = 6; // 默认每次移动6度

        function handleMouseMove(e) {
            if (!isDragging) return;
            e.preventDefault();
            const currentAngle = calculateAngle(e, currentElement);
            
            if (currentElement.classList.contains('hour')) {
                hourAngle = (currentAngle + 90) % 360;
                minuteAngle = (hourAngle * 12) % 360;
            } else {
                oldMinuteAngle = minuteAngle;
                // 根据当前minuteStep对齐角度
                minuteAngle = Math.round((currentAngle + 90) / minuteStep) * minuteStep % 360;
                let angleDiff = (minuteAngle - oldMinuteAngle + 360) % 360;
                if (angleDiff > 180) {
                    angleDiff = angleDiff - 360;
                }
                hourAngle = (hourAngle + angleDiff / 12 + 360) % 360;
            }

            document.querySelector('.hour').style.transform = `rotate(${hourAngle}deg)`;
            document.querySelector('.minute').style.transform = `rotate(${minuteAngle}deg)`;
            updateDigitalTime(hourAngle, minuteAngle);
        }

        function handleMouseUp() {
            isDragging = false;
            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('mouseup', handleMouseUp);
        }

        function updateDigitalTime(hourDeg, minuteDeg) {
            let hours = Math.floor(hourDeg / 30);
            let minutes = Math.floor(minuteDeg / 6);
            
            hours = hours === 0 ? 12 : hours;
            hours = hours.toString().padStart(2, '0');
            minutes = minutes.toString().padStart(2, '0');
            
            document.querySelector('.digital-time').textContent = `${hours}:${minutes}`;
        }

        document.querySelector('.clock').addEventListener('mousedown', handleMouseDown);

        function updateClock() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            
            hourAngle = ((hours % 12 + minutes / 60) * 30) % 360;
            minuteAngle = (minutes * 6) % 360;
            
            document.querySelector('.hour').style.transform = `rotate(${hourAngle}deg)`;
            document.querySelector('.minute').style.transform = `rotate(${minuteAngle}deg)`;
            
            const displayHours = hours.toString().padStart(2, '0');
            const displayMinutes = minutes.toString().padStart(2, '0');
            document.querySelector('.digital-time').textContent = `${displayHours}:${displayMinutes}`;
        }

        function animateClockHands(minutesToAdd) {
            const startMinuteAngle = minuteAngle;
            const startHourAngle = hourAngle;
            const targetMinuteAngle = (startMinuteAngle + minutesToAdd * 6) % 360;
            const targetHourAngle = (startHourAngle + (minutesToAdd / 60) * 30) % 360;
            const duration = 500; // 动画持续时间（毫秒）
            const startTime = performance.now();

            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // 使用缓动函数使动画更自然
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                
                minuteAngle = startMinuteAngle + (targetMinuteAngle - startMinuteAngle) * easeProgress;
                if (minuteAngle >= 360) minuteAngle %= 360;
                
                hourAngle = startHourAngle + (targetHourAngle - startHourAngle) * easeProgress;
                if (hourAngle >= 360) hourAngle %= 360;
                
                document.querySelector('.minute').style.transform = `rotate(${minuteAngle}deg)`;
                document.querySelector('.hour').style.transform = `rotate(${hourAngle}deg)`;
                
                // 更新数字时间显示
                const totalMinutes = Math.floor(minuteAngle / 6);
                const hours = Math.floor(hourAngle / 30);
                const displayHours = (hours === 0 ? 12 : hours).toString().padStart(2, '0');
                const displayMinutes = totalMinutes.toString().padStart(2, '0');
                document.querySelector('.digital-time').textContent = `${displayHours}:${displayMinutes}`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }
            
            requestAnimationFrame(animate);
        }

        // 修改按钮点击事件
        document.querySelectorAll('.time-button').forEach(button => {
            button.addEventListener('click', () => {
                if (button.classList.contains('toggle-hand')) {
                    const hand = button.dataset.hand;
                    const element = document.querySelector(`.${hand}`);
                    const isVisible = element.style.visibility !== 'hidden';
                    element.style.visibility = isVisible ? 'hidden' : 'visible';
                    button.textContent = isVisible ? `显示${hand === 'hour' ? '时' : '分'}针` : `隐藏${hand === 'hour' ? '时' : '分'}针`;
                    button.classList.toggle('active');
                    return;
                }
                if (button.classList.contains('toggle-time')) {
                    const digitalTime = document.querySelector('.digital-time');
                    const isVisible = digitalTime.style.opacity !== '0';
                    digitalTime.style.opacity = isVisible ? '0' : '1';
                    button.textContent = isVisible ? '显示时间' : '隐藏时间';
                    button.classList.toggle('active');
                    return;
                }
                if (button.classList.contains('random-time')) {
                    const randomHours = Math.floor(Math.random() * 12) + 1;
                    // 根据当前minuteStep调整随机分钟数
                    let randomMinutes;
                    if (minuteStep === 30) { // 5分钟模式
                        randomMinutes = Math.floor(Math.random() * 12) * 5; // 生成0-55之间5的倍数
                    } else { // 1分钟模式
                        randomMinutes = Math.floor(Math.random() * 60);
                    }
                    const targetHourAngle = ((randomHours % 12 + randomMinutes / 60) * 30) % 360;
                    const targetMinuteAngle = (randomMinutes * 6) % 360;
                    
                    // 计算需要旋转的角度差
                    let hourDiff = targetHourAngle - hourAngle;
                    let minuteDiff = targetMinuteAngle - minuteAngle;
                    
                    // 确保旋转方向是最短的路径
                    if (hourDiff > 180) hourDiff -= 360;
                    if (hourDiff < -180) hourDiff += 360;
                    if (minuteDiff > 180) minuteDiff -= 360;
                    if (minuteDiff < -180) minuteDiff += 360;
                    
                    // 使用现有的动画函数
                    const startMinuteAngle = minuteAngle;
                    const startHourAngle = hourAngle;
                    const duration = 500;
                    const startTime = performance.now();
                    
                    function animate(currentTime) {
                        const elapsed = currentTime - startTime;
                        const progress = Math.min(elapsed / duration, 1);
                        const easeProgress = 1 - Math.pow(1 - progress, 3);
                        
                        minuteAngle = (startMinuteAngle + minuteDiff * easeProgress + 360) % 360;
                        hourAngle = (startHourAngle + hourDiff * easeProgress + 360) % 360;
                        
                        document.querySelector('.minute').style.transform = `rotate(${minuteAngle}deg)`;
                        document.querySelector('.hour').style.transform = `rotate(${hourAngle}deg)`;
                        
                        const displayHours = randomHours.toString().padStart(2, '0');
                        const displayMinutes = randomMinutes.toString().padStart(2, '0');
                        document.querySelector('.digital-time').textContent = `${displayHours}:${displayMinutes}`;
                        
                        if (progress < 1) {
                            requestAnimationFrame(animate);
                        }
                    }
                    
                    requestAnimationFrame(animate);
                    return;
                }
                const minutes = parseInt(button.dataset.minutes);
                minuteStep = minutes === 1 ? 6 : 30;
                document.querySelectorAll('.time-button').forEach(btn => {
                    if (!btn.classList.contains('toggle-hand') && !btn.classList.contains('toggle-time')) {
                        btn.classList.remove('active');
                    }
                });
                button.classList.add('active');
                animateClockHands(minutes);
            });
        });

        // 设置默认激活状态
        document.querySelector('[data-minutes="1"]').classList.add('active');
        updateClock();
    </script>
</body>
</html>